/*! For license information please see 82.9656d269f8cce0410715.js.LICENSE.txt */
(self.webpackChunkpayload_blog_typescript=self.webpackChunkpayload_blog_typescript||[]).push([[82],{6907:e=>{"use strict";e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var t="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+r+"]*["+t+"]"),a=new RegExp("^[^"+t+"]*["+r+"]")},8181:function(e,t,r){var n;e=r.nmd(e),function(a){var o=t,i=(e&&e.exports,"object"==typeof r.g&&r.g);i.global!==i&&i.window;var s=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,l=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,c=function(e){for(var t="",r=(e=e.replace(s,(function(e,t,r){return c(r)+t})).replace(l,"$2$1")).length;r--;)t+=e.charAt(r);return t},u={version:"0.2.0",reverse:c};void 0===(n=function(){return u}.call(t,r,t,e))||(e.exports=n)}()},8156:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)o["f"+i]=111+i;function s(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return l(e,t)})),a=function(e){return n.some((function(t){return c(t,e)}))};return null==r?a:a(r)}function l(e,t){var r=t&&t.byKey,a={},o=(e=e.replace("++","+add")).split("+"),i=o.length;for(var s in n)a[n[s]]=!1;var l=!0,c=!1,d=void 0;try{for(var h,p=o[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var v=h.value,m=v.endsWith("?")&&v.length>1;m&&(v=v.slice(0,-1));var g=f(v),y=n[g];1!==i&&y||(r?a.key=g:a.which=u(v)),y&&(a[y]=!m||null)}}catch(e){c=!0,d=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw d}}return a}function c(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function u(e){return e=f(e),o[e]||e.toUpperCase().charCodeAt(0)}function f(e){return e=e.toLowerCase(),e=a[e]||e}t.TB=function(e,t){return s(e,{byKey:!0},t)}},2705:(e,t,r)=>{var n=r(8638).Symbol;e.exports=n},4239:(e,t,r)=>{var n=r(2705),a=r(9607),o=r(2333),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},7561:(e,t,r)=>{var n=r(7990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},9607:(e,t,r)=>{var n=r(2705),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[s]=r:delete e[s]),a}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8638:(e,t,r)=>{var n=r(1957),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},7990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},3279:(e,t,r)=>{var n=r(3218),a=r(7771),o=r(4841),i=Math.max,s=Math.min;e.exports=function(e,t,r){var l,c,u,f,d,h,p=0,v=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=l,n=c;return l=c=void 0,p=t,f=e.apply(n,r)}function w(e){return p=e,d=setTimeout(E,t),v?y(e):f}function b(e){var r=e-h;return void 0===h||r>=t||r<0||m&&e-p>=u}function E(){var e=a();if(b(e))return x(e);d=setTimeout(E,function(e){var r=t-(e-h);return m?s(r,u-(e-p)):r}(e))}function x(e){return d=void 0,g&&l?y(e):(l=c=void 0,f)}function O(){var e=a(),r=b(e);if(l=arguments,c=this,h=e,r){if(void 0===d)return w(h);if(m)return clearTimeout(d),d=setTimeout(E,t),y(h)}return void 0===d&&(d=setTimeout(E,t)),f}return t=o(t)||0,n(r)&&(v=!!r.leading,u=(m="maxWait"in r)?i(o(r.maxWait)||0,t):u,g="trailing"in r?!!r.trailing:g),O.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=h=c=d=void 0},O.flush=function(){return void 0===d?f:x(a())},O}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,r)=>{var n=r(4239),a=r(7005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},7771:(e,t,r)=>{var n=r(8638);e.exports=function(){return n.Date.now()}},3493:(e,t,r)=>{var n=r(3279),a=r(3218);e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}},4841:(e,t,r)=>{var n=r(7561),a=r(3218),o=r(3448),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):i.test(e)?NaN:+e}},1082:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ta});var n=r(7294),a=r(1061);function o(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}const i=function(e){var t,r;return!1!==o(e)&&("function"==typeof(t=e.constructor)&&(!1!==o(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))};var s,l,c,u=r(8181),f=r(4155),d="undefined"!=typeof Symbol,h="undefined"!=typeof Map,p="undefined"!=typeof Set,v=d?Symbol("immer-nothing"):((s={})["immer-nothing"]=!0,s),m=d?Symbol("immer-draftable"):"__$immer_draftable",g=d?Symbol("immer-state"):"__$immer_state",y=d?Symbol.iterator:"@@iterator",w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function b(e,t){function r(){this.constructor=e}w(e,t),e.prototype=(r.prototype=t.prototype,new r)}function E(e){return!!e&&!!e[g]}function x(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[m]||!!e.constructor[m]||D(e)||S(e))}!function(e){e[e.Object=0]="Object",e[e.Array=1]="Array",e[e.Map=2]="Map",e[e.Set=3]="Set"}(l||(l={})),function(e){e[e.ProxyObject=0]="ProxyObject",e[e.ProxyArray=1]="ProxyArray",e[e.ES5Object=2]="ES5Object",e[e.ES5Array=3]="ES5Array",e[e.Map=4]="Map",e[e.Set=5]="Set"}(c||(c={}));var O="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function k(e,t){P(e)===l.Object?O(e).forEach((function(r){return t(r,e[r],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function P(e){if(e||_(),e[g])switch(e[g].type){case c.ES5Object:case c.ProxyObject:return l.Object;case c.ES5Array:case c.ProxyArray:return l.Array;case c.Map:return l.Map;case c.Set:return l.Set}return Array.isArray(e)?l.Array:D(e)?l.Map:S(e)?l.Set:l.Object}function F(e,t){return P(e)===l.Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){return P(e)===l.Map?e.get(t):e[t]}function j(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function D(e){return h&&e instanceof Map}function S(e){return p&&e instanceof Set}function A(e){return e.copy||e.base}function N(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var r=Object.create(Object.getPrototypeOf(e));return O(e).forEach((function(n){if(n!==g){var a=Object.getOwnPropertyDescriptor(e,n),o=a.value;if(a.get){if(!t)throw new Error("Immer drafts cannot have computed properties");o=a.get.call(e)}a.enumerable?r[n]=o:Object.defineProperty(r,n,{value:o,writable:!0,configurable:!0})}})),r}function B(e,t){if(x(e)&&!E(e)&&!Object.isFrozen(e)){var r=P(e);r===l.Set?e.add=e.clear=e.delete=M:r===l.Map&&(e.set=e.clear=e.delete=M),Object.freeze(e),t&&k(e,(function(e,t){return B(t,!0)}))}}function M(){throw new Error("This object has been frozen and should not be mutated")}function _(){throw new Error("Illegal state, please file a bug")}var T=function(){function e(e,t){this.drafts=[],this.parent=e,this.immer=t,this.canAutoFreeze=!0}return e.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},e.prototype.revoke=function(){this.leave(),this.drafts.forEach(z),this.drafts=null},e.prototype.leave=function(){this===e.current&&(e.current=this.parent)},e.enter=function(t){var r=new e(e.current,t);return e.current=r,r},e}();function z(e){var t=e[g];t.type===c.ProxyObject||t.type===c.ProxyArray?t.revoke():t.revoked=!0}function R(e,t,r){var n=r.drafts[0],a=void 0!==t&&t!==n;if(e.willFinalize(r,t,a),a){if(n[g].modified)throw r.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");x(t)&&(t=L(e,t,r),r.parent||H(e,t)),r.patches&&(r.patches.push({op:"replace",path:[],value:t}),r.inversePatches.push({op:"replace",path:[],value:n[g].base}))}else t=L(e,n,r,[]);return r.revoke(),r.patches&&r.patchListener(r.patches,r.inversePatches),t!==v?t:void 0}function L(e,t,r,n){var a=t[g];if(!a)return Object.isFrozen(t)?t:W(e,t,r);if(a.scope!==r)return t;if(!a.modified)return H(e,a.base,!0),a.base;if(!a.finalized){if(a.finalized=!0,W(e,a.draft,r,n),e.onDelete&&a.type!==c.Set)if(e.useProxies){k(a.assigned,(function(t,r){r||e.onDelete(a,t)}))}else{var o=a.base,i=a.copy;k(o,(function(t){F(i,t)||e.onDelete(a,t)}))}e.onCopy&&e.onCopy(a),e.autoFreeze&&r.canAutoFreeze&&B(a.copy,!1),n&&r.patches&&function(e,t,r,n){switch(e.type){case c.ProxyObject:case c.ES5Object:case c.Map:return function(e,t,r,n){var a=e.base,o=e.copy;k(e.assigned,(function(e,i){var s=C(a,e),l=C(o,e),c=i?F(a,e)?"replace":"add":"remove";if(s!==l||"replace"!==c){var u=t.concat(e);r.push("remove"===c?{op:c,path:u}:{op:c,path:u,value:l}),n.push("add"===c?{op:"remove",path:u}:"remove"===c?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}}))}(e,t,r,n);case c.ES5Array:case c.ProxyArray:return function(e,t,r,n){var a,o,i=e.base,s=e.assigned,l=e.copy;l||_();l.length<i.length&&(i=(a=[l,i])[0],l=a[1],r=(o=[n,r])[0],n=o[1]);var c=l.length-i.length,u=0;for(;i[u]===l[u]&&u<i.length;)++u;var f=i.length;for(;f>u&&i[f-1]===l[f+c-1];)--f;for(var d=u;d<f;++d)if(s[d]&&l[d]!==i[d]){var h=t.concat([d]);r.push({op:"replace",path:h,value:l[d]}),n.push({op:"replace",path:h,value:i[d]})}var p=r.length;for(d=f+c-1;d>=f;--d){h=t.concat([d]);r[p+d-f]={op:"add",path:h,value:l[d]},n.push({op:"remove",path:h})}}(e,t,r,n);case c.Set:(function(e,t,r,n){var a=e.base,o=e.copy,i=0;a.forEach((function(e){if(!o.has(e)){var a=t.concat([i]);r.push({op:"remove",path:a,value:e}),n.unshift({op:"add",path:a,value:e})}i++})),i=0,o.forEach((function(e){if(!a.has(e)){var o=t.concat([i]);r.push({op:"add",path:o,value:e}),n.unshift({op:"remove",path:o,value:e})}i++}))})(e,t,r,n)}}(a,n,r.patches,r.inversePatches)}return a.copy}function W(e,t,r,n){var a=t[g];return a&&(a.type!==c.ES5Object&&a.type!==c.ES5Array||(a.copy=N(a.draft,!0)),t=a.copy),k(t,(function(o,i){return I(e,r,t,a,t,o,i,n)})),t}function I(e,t,r,n,a,o,i,s){if(i===a)throw Error("Immer forbids circular references");var c=!!n&&a===r,u=S(a);if(E(i)){var f=s&&c&&!u&&!F(n.assigned,o)?s.concat(o):void 0;(function(e,t,r){switch(P(e)){case l.Map:e.set(t,r);break;case l.Set:e.delete(t),e.add(r);break;default:e[t]=r}})(a,o,i=L(e,i,t,f)),E(i)&&(t.canAutoFreeze=!1)}else{if(c&&j(i,C(n.base,o)))return;x(i)&&(k(i,(function(a,o){return I(e,t,r,n,i,a,o,s)})),t.parent||H(e,i))}c&&e.onAssign&&!u&&e.onAssign(n,o,i)}function H(e,t,r){void 0===r&&(r=!1),e.autoFreeze&&!E(t)&&B(t,r)}var V={get:function(e,t){if(t===g)return e;var r=e.drafts;if(!e.modified&&F(r,t))return r[t];var n=A(e)[t];if(e.finalized||!x(n))return n;if(e.modified){if(n!==K(e.base,t))return n;r=e.copy}return r[t]=e.scope.immer.createProxy(n,e)},has:function(e,t){return t in A(e)},ownKeys:function(e){return Reflect.ownKeys(A(e))},set:function(e,t,r){if(!e.modified){var n=K(e.base,t);if(r?j(n,r)||r===e.drafts[t]:j(n,r)&&t in e.base)return!0;Z(e),U(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){return void 0!==K(e.base,t)||t in e.base?(e.assigned[t]=!1,Z(e),U(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var r=A(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=e.type!==c.ProxyArray||"length"!==t),n},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},q={};function K(e,t){var r=e[g],n=Reflect.getOwnPropertyDescriptor(r?A(r):e,t);return n&&n.value}function U(e){if(!e.modified){if(e.modified=!0,e.type===c.ProxyObject||e.type===c.ProxyArray){var t=e.copy=N(e.base);k(e.drafts,(function(e,r){t[e]=r})),e.drafts=void 0}e.parent&&U(e.parent)}}function Z(e){e.copy||(e.copy=N(e.base))}function $(e,t,r){e.drafts.forEach((function(e){e[g].finalizing=!0})),r?E(t)&&t[g].scope===e&&re(e.drafts):(e.patches&&ne(e.drafts[0]),re(e.drafts))}function J(e,t){var r=Array.isArray(e),n=Q(e);k(n,(function(t){!function(e,t,r){var n=ee[t];n?n.enumerable=r:ee[t]=n={configurable:!0,enumerable:r,get:function(){return function(e,t){te(e);var r=Y(A(e),t);if(e.finalizing)return r;if(r===Y(e.base,t)&&x(r))return G(e),e.copy[t]=e.scope.immer.createProxy(r,e);return r}(this[g],t)},set:function(e){!function(e,t,r){if(te(e),e.assigned[t]=!0,!e.modified){if(j(r,Y(A(e),t)))return;X(e),G(e)}e.copy[t]=r}(this[g],t,e)}};Object.defineProperty(e,t,n)}(n,t,r||function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(!r||!r.enumerable)}(e,t))}));var a,o,i,s={type:r?c.ES5Array:c.ES5Object,scope:t?t.scope:T.current,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:n,copy:null,revoked:!1,isManual:!1};return a=n,o=g,i=s,Object.defineProperty(a,o,{value:i,enumerable:!1,writable:!0}),n}function Y(e,t){var r=e[g];if(r&&!r.finalizing){r.finalizing=!0;var n=e[t];return r.finalizing=!1,n}return e[t]}function X(e){e.modified||(e.modified=!0,e.parent&&X(e.parent))}function G(e){e.copy||(e.copy=Q(e.base))}function Q(e){var t=e&&e[g];if(t){t.finalizing=!0;var r=N(t.draft,!0);return t.finalizing=!1,r}return N(e)}k(V,(function(e,t){q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),q.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return V.deleteProperty.call(this,e[0],t)},q.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return V.set.call(this,e[0],t,r,e[0])};var ee={};function te(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(A(e)))}function re(e){for(var t=e.length-1;t>=0;t--){var r=e[t][g];if(!r.modified)switch(r.type){case c.ES5Array:oe(r)&&X(r);break;case c.ES5Object:ae(r)&&X(r)}}}function ne(e){if(e&&"object"==typeof e){var t=e[g];if(t){var r=t.base,n=t.draft,a=t.assigned,o=t.type;if(o===c.ES5Object)k(n,(function(e){e!==g&&(void 0!==r[e]||F(r,e)?a[e]||ne(n[e]):(a[e]=!0,X(t)))})),k(r,(function(e){void 0!==n[e]||F(n,e)||(a[e]=!1,X(t))}));else if(o===c.ES5Array){if(oe(t)&&(X(t),a.length=!0),n.length<r.length)for(var i=n.length;i<r.length;i++)a[i]=!1;else for(i=r.length;i<n.length;i++)a[i]=!0;var s=Math.min(n.length,r.length);for(i=0;i<s;i++)void 0===a[i]&&ne(n[i])}}}}function ae(e){for(var t=e.base,r=e.draft,n=Object.keys(r),a=n.length-1;a>=0;a--){var o=n[a],i=t[o];if(void 0===i&&!F(t,o))return!0;var s=r[o],l=s&&s[g];if(l?l.base!==i:!j(s,i))return!0}return n.length!==Object.keys(t).length}function oe(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var ie=function(e){if(!e)throw new Error("Map is not polyfilled");function t(e,t){return this[g]={type:c.Map,parent:t,scope:t?t.scope:T.current,modified:!1,finalized:!1,copy:void 0,assigned:void 0,base:e,draft:this,isManual:!1,revoked:!1},this}b(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return A(this[g]).size},enumerable:!0,configurable:!0}),r.has=function(e){return A(this[g]).has(e)},r.set=function(e,t){var r=this[g];return te(r),A(r).get(e)!==t&&(se(r),r.scope.immer.markChanged(r),r.assigned.set(e,!0),r.copy.set(e,t),r.assigned.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[g];return te(t),se(t),t.scope.immer.markChanged(t),t.assigned.set(e,!1),t.copy.delete(e),!0},r.clear=function(){var e=this[g];return te(e),se(e),e.scope.immer.markChanged(e),e.assigned=new Map,e.copy.clear()},r.forEach=function(e,t){var r=this;A(this[g]).forEach((function(n,a,o){e.call(t,r.get(a),a,r)}))},r.get=function(e){var t=this[g];te(t);var r=A(t).get(e);if(t.finalized||!x(r))return r;if(r!==t.base.get(e))return r;var n=t.scope.immer.createProxy(r,t);return se(t),t.copy.set(e,n),n},r.keys=function(){return A(this[g]).keys()},r.values=function(){var e,t=this,r=this.keys();return(e={})[y]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,r=this.keys();return(e={})[y]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},r[y]=function(){return this.entries()},t}(Map);function se(e){e.copy||(e.assigned=new Map,e.copy=new Map(e.base))}var le=function(e){if(!e)throw new Error("Set is not polyfilled");function t(e,t){return this[g]={type:c.Set,parent:t,scope:t?t.scope:T.current,modified:!1,finalized:!1,copy:void 0,base:e,draft:this,drafts:new Map,revoked:!1,isManual:!1},this}b(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return A(this[g]).size},enumerable:!0,configurable:!0}),r.has=function(e){var t=this[g];return te(t),t.copy?!!t.copy.has(e)||!(!t.drafts.has(e)||!t.copy.has(t.drafts.get(e))):t.base.has(e)},r.add=function(e){var t=this[g];return te(t),t.copy?t.copy.add(e):t.base.has(e)||(ce(t),t.scope.immer.markChanged(t),t.copy.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[g];return te(t),ce(t),t.scope.immer.markChanged(t),t.copy.delete(e)||!!t.drafts.has(e)&&t.copy.delete(t.drafts.get(e))},r.clear=function(){var e=this[g];return te(e),ce(e),e.scope.immer.markChanged(e),e.copy.clear()},r.values=function(){var e=this[g];return te(e),ce(e),e.copy.values()},r.entries=function(){var e=this[g];return te(e),ce(e),e.copy.entries()},r.keys=function(){return this.values()},r[y]=function(){return this.values()},r.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}(Set);function ce(e){e.copy||(e.copy=new Set,e.base.forEach((function(t){if(x(t)){var r=e.scope.immer.createProxy(t,e);e.drafts.set(t,r),e.copy.add(r)}else e.copy.add(t)})))}function ue(e,t){return t.forEach((function(t){var r=t.path,n=t.op;r.length||_();for(var a=e,o=0;o<r.length-1;o++)if(!(a=C(a,r[o]))||"object"!=typeof a)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var i=P(a),s=fe(t.value),c=r[r.length-1];switch(n){case"replace":switch(i){case l.Map:return a.set(c,s);case l.Set:throw new Error('Sets cannot have "replace" patches.');default:return a[c]=s}case"add":switch(i){case l.Array:return a.splice(c,0,s);case l.Map:return a.set(c,s);case l.Set:return a.add(s);default:return a[c]=s}case"remove":switch(i){case l.Array:return a.splice(c,1);case l.Map:return a.delete(c);case l.Set:return a.delete(t.value);default:return delete a[c]}default:throw new Error("Unsupported patch operation: "+n)}})),e}function fe(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(fe);if(D(e))return new Map(Array.from(e.entries()).map((function(e){return[e[0],fe(e[1])]})));if(S(e))return new Set(Array.from(e).map(fe));var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=fe(e[r]);return t}function de(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n}var he={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:void 0===f&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},pe=new(function(){function e(e){var t=this;this.useProxies=!1,this.autoFreeze=!1,k(he,(function(r,n){var a,o;t[r]=null!=(o=null===(a=e)||void 0===a?void 0:a[r])?o:n})),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}return e.prototype.produce=function(e,t,r){var n,a=this;if("function"==typeof e&&"function"!=typeof t){var o=t;t=e;var i=this;return function(e){var r=arguments,n=this;void 0===e&&(e=o);for(var a=[],s=1;s<arguments.length;s++)a[s-1]=r[s];return i.produce(e,(function(e){return t.call.apply(t,de([n,e],a))}))}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==r&&"function"!=typeof r)throw new Error("The third argument to `produce` must be a function or undefined");if(x(e)){var s=T.enter(this),l=this.createProxy(e,void 0),c=!0;try{n=t(l),c=!1}finally{c?s.revoke():s.leave()}return"undefined"!=typeof Promise&&n instanceof Promise?n.then((function(e){return s.usePatches(r),R(a,e,s)}),(function(e){throw s.revoke(),e})):(s.usePatches(r),R(this,n,s))}if((n=t(e))!==v)return void 0===n&&(n=e),H(this,n,!0),n},e.prototype.produceWithPatches=function(e,t,r){var n,a,o=this;return"function"==typeof e?function(t){for(var r=arguments,n=[],a=1;a<arguments.length;a++)n[a-1]=r[a];return o.produceWithPatches(t,(function(t){return e.apply(void 0,de([t],n))}))}:(r&&_(),[this.produce(e,t,(function(e,t){n=e,a=t})),n,a])},e.prototype.createDraft=function(e){if(!x(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=T.enter(this),r=this.createProxy(e,void 0);return r[g].isManual=!0,t.leave(),r},e.prototype.finishDraft=function(e,t){var r=e&&e[g];if(!r||!r.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(r.finalized)throw new Error("The given draft is already finalized");var n=r.scope;return n.usePatches(t),R(this,void 0,n)},e.prototype.setAutoFreeze=function(e){this.autoFreeze=e},e.prototype.setUseProxies=function(e){this.useProxies=e},e.prototype.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}return E(e)?ue(e,t):this.produce(e,(function(e){return ue(e,t.slice(r+1))}))},e.prototype.createProxy=function(e,t){var r=D(e)?function(e,t){return new ie(e,t)}(e,t):S(e)?function(e,t){return new le(e,t)}(e,t):this.useProxies?function(e,t){var r=Array.isArray(e),n={type:r?c.ProxyArray:c.ProxyObject,scope:t?t.scope:T.current,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null,isManual:!1},a=n,o=V;r&&(a=[n],o=q);var i=Proxy.revocable(a,o),s=i.revoke,l=i.proxy;return n.draft=l,n.revoke=s,l}(e,t):J(e,t);return(t?t.scope:T.current).drafts.push(r),r},e.prototype.willFinalize=function(e,t,r){this.useProxies||$(e,t,r)},e.prototype.markChanged=function(e){this.useProxies?U(e):X(e)},e}()),ve=pe.produce,me=(pe.produceWithPatches.bind(pe),pe.setAutoFreeze.bind(pe),pe.setUseProxies.bind(pe),pe.applyPatches.bind(pe),pe.createDraft.bind(pe)),ge=pe.finishDraft.bind(pe);function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function we(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var be=new WeakMap,Ee=new WeakMap,xe=new WeakMap,Oe=new WeakMap,ke=new WeakMap,Pe=new WeakMap,Fe=/\s/,Ce=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,je=/['\u2018\u2019]/,De=e=>{for(var t=0,r=null,n=e.charCodeAt(0);n;)if(Ae(n)){var a=Ne(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=a?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(Me(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!Be(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},Se=(e,t)=>{if(Fe.test(e))return!1;if(je.test(e)){var r=t.charAt(0),n=De(r);r=t.slice(0,n);var a=t.slice(n);if(Se(r,a))return!0}return!Ce.test(e)},Ae=e=>55296<=e&&e<=57343,Ne=(e,t,r)=>{if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},Be=e=>e<=65039&&e>=65024,Me=e=>10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e;function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ze={above(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:a=e.selection,match:o}=t;if(a){var i=ze.path(e,a),s="lowest"===n;for(var[l,c]of ze.levels(e,{at:i,voids:r,match:o,reverse:s}))if(!et.isText(l)&&!qe.equals(i,c))return[l,c]}},addMark(e,t,r){e.addMark(t,r)},after(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={anchor:ze.point(e,t,{edge:"end"}),focus:ze.end(e,[])},{distance:o=1}=n,i=0;for(var s of ze.positions(e,Te({},n,{at:a}))){if(i>o)break;0!==i&&(r=s),i++}return r},before(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={anchor:ze.start(e,[]),focus:ze.point(e,t,{edge:"start"})},{distance:o=1}=n,i=0;for(var s of ze.positions(e,Te({},n,{at:a,reverse:!0}))){if(i>o)break;0!==i&&(r=s),i++}return r},deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e){e.deleteFragment()},edges:(e,t)=>[ze.start(e,t),ze.end(e,t)],end:(e,t)=>ze.point(e,t,{edge:"end"}),first(e,t){var r=ze.path(e,t,{edge:"start"});return ze.node(e,r)},fragment(e,t){var r=ze.range(e,t);return We.fragment(e,r)},hasBlocks:(e,t)=>t.children.some((t=>ze.isBlock(e,t))),hasInlines:(e,t)=>t.children.some((t=>et.isText(t)||ze.isInline(e,t))),hasTexts:(e,t)=>t.children.every((e=>et.isText(e))),insertBreak(e){e.insertBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>Re.isElement(t)&&!e.isInline(t),isEditor:e=>i(e)&&"function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||i(e.marks))&&(null===e.selection||Ye.isRange(e.selection))&&We.isNodeList(e.children)&&Ve.isOperationList(e.operations),isEnd(e,t,r){var n=ze.end(e,r);return Ze.equals(t,n)},isEdge:(e,t,r)=>ze.isStart(e,t,r)||ze.isEnd(e,t,r),isEmpty(e,t){var{children:r}=t,[n]=r;return 0===r.length||1===r.length&&et.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:(e,t)=>Re.isElement(t)&&e.isInline(t),isNormalizing(e){var t=xe.get(e);return void 0===t||t},isStart(e,t,r){if(0!==t.offset)return!1;var n=ze.start(e,r);return Ze.equals(t,n)},isVoid:(e,t)=>Re.isElement(t)&&e.isVoid(t),last(e,t){var r=ze.path(e,t,{edge:"end"});return ze.node(e,r)},leaf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ze.path(e,t,r);return[We.leaf(e,n),n]},*levels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,reverse:n=!1,voids:a=!1}=t,{match:o}=t;if(null==o&&(o=()=>!0),r){var i=[],s=ze.path(e,r);for(var[l,c]of We.levels(e,s))if(o(l)&&(i.push([l,c]),!a&&ze.isVoid(e,l)))break;n&&i.reverse(),yield*i}},marks(e){var{marks:t,selection:r}=e;if(!r)return null;if(t)return t;if(Ye.isExpanded(r)){var[n]=ze.nodes(e,{match:et.isText});if(n){var[a]=n;return we(a,["text"])}return{}}var{anchor:o}=r,{path:i}=o,[s]=ze.leaf(e,i);if(0===o.offset){var l=ze.previous(e,{at:i,match:et.isText}),c=ze.above(e,{match:t=>ze.isBlock(e,t)});if(l&&c){var[u,f]=l,[,d]=c;qe.isAncestor(d,f)&&(s=u)}}return we(s,["text"])},next(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:a,at:o=e.selection}=t;if(o){var[,i]=ze.last(e,o),[,s]=ze.last(e,[]),l=[i,s];if(qe.isPath(o)&&0===o.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(qe.isPath(o)){var[c]=ze.parent(e,o);a=e=>c.children.includes(e)}else a=()=>!0;var[,u]=ze.nodes(e,{at:l,match:a,mode:r,voids:n});return u}},node(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ze.path(e,t,r);return[We.get(e,n),n]},*nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,mode:n="all",universal:a=!1,reverse:o=!1,voids:i=!1}=t,{match:s}=t;if(s||(s=()=>!0),r){var l,c;if(Le.isSpan(r))l=r[0],c=r[1];else{var u=ze.path(e,r,{edge:"start"}),f=ze.path(e,r,{edge:"end"});l=o?f:u,c=o?u:f}var d,h=We.nodes(e,{reverse:o,from:l,to:c,pass:t=>{var[r]=t;return!i&&ze.isVoid(e,r)}}),p=[];for(var[v,m]of h){var g=d&&0===qe.compare(m,d[1]);if("highest"!==n||!g)if(s(v))if("lowest"===n&&g)d=[v,m];else{var y="lowest"===n?d:[v,m];y&&(a?p.push(y):yield y),d=[v,m]}else if(a&&!g&&et.isText(v))return}"lowest"===n&&d&&(a?p.push(d):yield d),a&&(yield*p)}},normalize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:r=!1}=t,n=e=>be.get(e)||[];if(ze.isNormalizing(e)){if(r){var a=Array.from(We.nodes(e),(e=>{var[,t]=e;return t}));be.set(e,a)}0!==n(e).length&&ze.withoutNormalizing(e,(()=>{for(var t=42*n(e).length,r=0;0!==n(e).length;){if(r>t)throw new Error("\n            Could not completely normalize the editor after ".concat(t," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var a=n(e).pop(),o=ze.node(e,a);e.normalizeNode(o),r++}}))}},parent(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ze.path(e,t,r),a=qe.parent(n);return ze.node(e,a)},path(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:n,edge:a}=r;if(qe.isPath(t))if("start"===a){var[,o]=We.first(e,t);t=o}else if("end"===a){var[,i]=We.last(e,t);t=i}return Ye.isRange(t)&&(t="start"===a?Ye.start(t):"end"===a?Ye.end(t):qe.common(t.anchor.path,t.focus.path)),Ze.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},pathRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:t}=a;return ze.pathRefs(e).delete(a),a.current=null,t}};return ze.pathRefs(e).add(a),a},pathRefs(e){var t=Oe.get(e);return t||(t=new Set,Oe.set(e,t)),t},point(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:n="start"}=r;if(qe.isPath(t)){var a;if("end"===n){var[,o]=We.last(e,t);a=o}else{var[,i]=We.first(e,t);a=i}var s=We.get(e,a);if(!et.isText(s))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:a,offset:"end"===n?s.text.length:0}}if(Ye.isRange(t)){var[l,c]=Ye.edges(t);return"start"===n?l:c}return t},pointRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:t}=a;return ze.pointRefs(e).delete(a),a.current=null,t}};return ze.pointRefs(e).add(a),a},pointRefs(e){var t=ke.get(e);return t||(t=new Set,ke.set(e,t)),t},*positions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,unit:n="offset",reverse:a=!1}=t;if(r){var o=ze.range(e,r),[i,s]=Ye.edges(o),l=a?s:i,c="",f=0,d=0,h=null,p=!1,v=()=>{null==h&&(h="character"===n?De(c):"word"===n?(e=>{for(var t,r=0,n=0,a=!1;t=e.charAt(n);){var o=De(t);t=e.slice(n,n+o);var i=e.slice(n+o);if(Se(t,i))a=!0,r+=o;else{if(a)break;r+=o}n+=o}return r})(c):"line"===n||"block"===n?c.length:1,c=c.slice(h)),d=a?d-h:d+h,h=(f-=h)>=0?null:0-f};for(var[m,g]of ze.nodes(e,{at:r,reverse:a})){if(Re.isElement(m)){if(e.isVoid(m)){yield ze.start(e,g);continue}if(e.isInline(m))continue;if(ze.hasInlines(e,m)){var y=qe.isAncestor(g,s.path)?s:ze.end(e,g),w=qe.isAncestor(g,i.path)?i:ze.start(e,g),b=ze.string(e,{anchor:w,focus:y});c=a?(0,u.reverse)(b):b,p=!0}}if(et.isText(m)){var E=qe.equals(g,l.path);for(f=m.text.length,d=a?f:0,E&&(f=a?l.offset:f-l.offset,d=l.offset),(E||p||"offset"===n)&&(yield{path:g,offset:d});""!==c&&(v(),f>=0);)yield{path:g,offset:d};p=!1}}}},previous(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:a,at:o=e.selection}=t;if(o){var[,i]=ze.first(e,o),[,s]=ze.first(e,[]),l=[i,s];if(qe.isPath(o)&&0===o.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(qe.isPath(o)){var[c]=ze.parent(e,o);a=e=>c.children.includes(e)}else a=()=>!0;var[,u]=ze.nodes(e,{reverse:!0,at:l,match:a,mode:r,voids:n});return u}},range:(e,t,r)=>Ye.isRange(t)&&!r?t:{anchor:ze.start(e,t),focus:ze.end(e,r||t)},rangeRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:t}=a;return ze.rangeRefs(e).delete(a),a.current=null,t}};return ze.rangeRefs(e).add(a),a},rangeRefs(e){var t=Pe.get(e);return t||(t=new Set,Pe.set(e,t)),t},removeMark(e,t){e.removeMark(t)},start:(e,t)=>ze.point(e,t,{edge:"start"}),string(e,t){var r=ze.range(e,t),[n,a]=Ye.edges(r),o="";for(var[i,s]of ze.nodes(e,{at:r,match:et.isText})){var l=i.text;qe.equals(s,a.path)&&(l=l.slice(0,a.offset)),qe.equals(s,n.path)&&(l=l.slice(n.offset)),o+=l}return o},unhangRange(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,[a,o]=Ye.edges(t);if(0!==a.offset||0!==o.offset||Ye.isCollapsed(t))return t;var i=ze.above(e,{at:o,match:t=>ze.isBlock(e,t)}),s=i?i[1]:[],l={anchor:ze.start(e,[]),focus:o},c=!0;for(var[u,f]of ze.nodes(e,{at:l,match:et.isText,reverse:!0,voids:n}))if(c)c=!1;else if(""!==u.text||qe.isBefore(f,s)){o={path:f,offset:u.text.length};break}return{anchor:a,focus:o}},void(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze.above(e,Te({},t,{match:t=>ze.isVoid(e,t)}))},withoutNormalizing(e,t){var r=ze.isNormalizing(e);xe.set(e,!1),t(),xe.set(e,r),ze.normalize(e)}},Re={isElement:e=>i(e)&&We.isNodeList(e.children)&&!ze.isEditor(e),isElementList:e=>Array.isArray(e)&&(0===e.length||Re.isElement(e[0])),matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},Le={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(qe.isPath)},We={ancestor(e,t){var r=We.get(e,t);if(et.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},*ancestors(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of qe.ancestors(t,r)){var a=[We.ancestor(e,n),n];yield a}},child(e,t){if(et.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},*children(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{reverse:n=!1}=r,a=We.ancestor(e,t),{children:o}=a,i=n?o.length-1:0;n?i>=0:i<o.length;){var s=We.child(a,i),l=t.concat(i);yield[s,l],i=n?i-1:i+1}},common(e,t,r){var n=qe.common(t,r);return[We.get(e,n),n]},descendant(e,t){var r=We.get(e,t);if(ze.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},*descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of We.nodes(e,t))0!==n.length&&(yield[r,n])},*elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of We.nodes(e,t))Re.isElement(r)&&(yield[r,n])},first(e,t){for(var r=t.slice(),n=We.get(e,r);n&&!et.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if(et.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return ve(e,(e=>{var[r,n]=Ye.edges(t),a=We.nodes(e,{reverse:!0,pass:e=>{var[,r]=e;return!Ye.includes(t,r)}});for(var[,o]of a){if(!Ye.includes(t,o)){var i=We.parent(e,o),s=o[o.length-1];i.children.splice(s,1)}if(qe.equals(o,n.path)){var l=We.leaf(e,o);l.text=l.text.slice(0,n.offset)}if(qe.equals(o,r.path)){var c=We.leaf(e,o);c.text=c.text.slice(r.offset)}}delete e.selection})).children},get(e,t){for(var r=e,n=0;n<t.length;n++){var a=t[n];if(et.isText(r)||!r.children[a])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[a]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var a=t[n];if(et.isText(r)||!r.children[a])return!1;r=r.children[a]}return!0},isNode:e=>et.isText(e)||Re.isElement(e)||ze.isEditor(e),isNodeList:e=>Array.isArray(e)&&(0===e.length||We.isNode(e[0])),last(e,t){for(var r=t.slice(),n=We.get(e,r);n&&!et.isText(n)&&0!==n.children.length;){var a=n.children.length-1;n=n.children[a],r.push(a)}return[n,r]},leaf(e,t){var r=We.get(e,t);if(!et.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},*levels(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of qe.levels(t,r)){var a=We.get(e,n);yield[a,n]}},matches:(e,t)=>Re.isElement(e)&&Re.matches(e,t)||et.isText(e)&&et.matches(e,t),*nodes(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pass:r,reverse:n=!1}=t,{from:a=[],to:o}=t,i=new Set,s=[],l=e;!o||!(n?qe.isBefore(s,o):qe.isAfter(s,o));)if(i.has(l)||(yield[l,s]),i.has(l)||et.isText(l)||0===l.children.length||null!=r&&!1!==r([l,s])){if(0===s.length)break;if(!n){var c=qe.next(s);if(We.has(e,c)){s=c,l=We.get(e,s);continue}}if(n&&0!==s[s.length-1])s=qe.previous(s),l=We.get(e,s);else s=qe.parent(s),l=We.get(e,s),i.add(l)}else{i.add(l);var u=n?l.children.length-1:0;qe.isAncestor(s,a)&&(u=a[s.length]),s=s.concat(u),l=We.get(e,s)}},parent(e,t){var r=qe.parent(t),n=We.get(e,r);if(et.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:e=>et.isText(e)?e.text:e.children.map(We.string).join(""),*texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of We.nodes(e,t))et.isText(r)&&(yield[r,n])}};function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ve={isNodeOperation:e=>Ve.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!i(e))return!1;switch(e.type){case"insert_node":return qe.isPath(e.path)&&We.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&qe.isPath(e.path);case"merge_node":return"number"==typeof e.position&&qe.isPath(e.path)&&i(e.properties);case"move_node":return qe.isPath(e.path)&&qe.isPath(e.newPath);case"remove_node":return qe.isPath(e.path)&&We.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&qe.isPath(e.path);case"set_node":return qe.isPath(e.path)&&i(e.properties)&&i(e.newProperties);case"set_selection":return null===e.properties&&Ye.isRange(e.newProperties)||null===e.newProperties&&Ye.isRange(e.properties)||i(e.properties)&&i(e.newProperties);case"split_node":return qe.isPath(e.path)&&"number"==typeof e.position&&i(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&(0===e.length||Ve.isOperation(e[0])),isSelectionOperation:e=>Ve.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>Ve.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return He({},e,{type:"remove_node"});case"insert_text":return He({},e,{type:"remove_text"});case"merge_node":return He({},e,{type:"split_node",path:qe.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;return qe.equals(t,r)?e:qe.isSibling(r,t)?He({},e,{path:t,newPath:r}):He({},e,{path:qe.transform(r,e),newPath:qe.transform(qe.next(r),e)});case"remove_node":return He({},e,{type:"insert_node"});case"remove_text":return He({},e,{type:"insert_text"});case"set_node":var{properties:n,newProperties:a}=e;return He({},e,{properties:a,newProperties:n});case"set_selection":var{properties:o,newProperties:i}=e;return He({},e,null==o?{properties:i,newProperties:null}:null==i?{properties:null,newProperties:o}:{properties:i,newProperties:o});case"split_node":return He({},e,{type:"merge_node",path:qe.next(e.path)})}}},qe={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=qe.levels(e,t);return n=r?n.slice(1):n.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var a=e[n];if(a!==t[n])break;r.push(a)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),a=t.slice(0,r),o=e[r],i=t[r];return qe.equals(n,a)&&o>i},endsAt(e,t){var r=e.length,n=e.slice(0,r),a=t.slice(0,r);return qe.equals(n,a)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),a=t.slice(0,r),o=e[r],i=t[r];return qe.equals(n,a)&&o<i},equals:(e,t)=>e.length===t.length&&e.every(((e,r)=>e===t[r])),isAfter:(e,t)=>1===qe.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===qe.compare(e,t),isBefore:(e,t)=>-1===qe.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===qe.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===qe.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===qe.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===qe.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&qe.equals(r,n)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=[],a=0;a<=e.length;a++)n.push(e.slice(0,a));return r&&n.reverse(),n},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!qe.isAncestor(t,e)&&!qe.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ve(e,(n=>{var{affinity:a="forward"}=r;if(0!==e.length)switch(t.type){case"insert_node":var{path:o}=t;(qe.equals(o,n)||qe.endsBefore(o,n)||qe.isAncestor(o,n))&&(n[o.length-1]+=1);break;case"remove_node":var{path:i}=t;if(qe.equals(i,n)||qe.isAncestor(i,n))return null;qe.endsBefore(i,n)&&(n[i.length-1]-=1);break;case"merge_node":var{path:s,position:l}=t;qe.equals(s,n)||qe.endsBefore(s,n)?n[s.length-1]-=1:qe.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=l);break;case"split_node":var{path:c,position:u}=t;if(qe.equals(c,n)){if("forward"===a)n[n.length-1]+=1;else if("backward"!==a)return null}else qe.endsBefore(c,n)?n[c.length-1]+=1:qe.isAncestor(c,n)&&e[c.length]>=u&&(n[c.length-1]+=1,n[c.length]-=u);break;case"move_node":var{path:f,newPath:d}=t;if(qe.equals(f,d))return;if(qe.isAncestor(f,n)||qe.equals(f,n)){var h=d.slice();return qe.endsBefore(f,d)&&f.length<d.length&&(h[f.length-1]-=1),h.concat(n.slice(f.length))}qe.isSibling(f,d)&&(qe.isAncestor(d,n)||qe.equals(d,n))?qe.endsBefore(f,n)?n[f.length-1]-=1:n[f.length-1]+=1:qe.endsBefore(d,n)||qe.equals(d,n)||qe.isAncestor(d,n)?(qe.endsBefore(f,n)&&(n[f.length-1]-=1),n[d.length-1]+=1):qe.endsBefore(f,n)&&(qe.equals(d,n)&&(n[d.length-1]+=1),n[f.length-1]-=1)}}))}},Ke={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var a=qe.transform(r,t,{affinity:n});e.current=a,null==a&&e.unref()}}};function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ze={compare(e,t){var r=qe.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:(e,t)=>1===Ze.compare(e,t),isBefore:(e,t)=>-1===Ze.compare(e,t),equals:(e,t)=>e.offset===t.offset&&qe.equals(e.path,t.path),isPoint:e=>i(e)&&"number"==typeof e.offset&&qe.isPath(e.path),transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ve(e,(e=>{var{affinity:n="forward"}=r,{path:a,offset:o}=e;switch(t.type){case"insert_node":case"move_node":e.path=qe.transform(a,t,r);break;case"insert_text":qe.equals(t.path,a)&&t.offset<=o&&(e.offset+=t.text.length);break;case"merge_node":qe.equals(t.path,a)&&(e.offset+=t.position),e.path=qe.transform(a,t,r);break;case"remove_text":qe.equals(t.path,a)&&t.offset<=o&&(e.offset-=Math.min(o-t.offset,t.text.length));break;case"remove_node":if(qe.equals(t.path,a)||qe.isAncestor(t.path,a))return null;e.path=qe.transform(a,t,r);break;case"split_node":if(qe.equals(t.path,a)){if(t.position===o&&null==n)return null;(t.position<o||t.position===o&&"forward"===n)&&(e.offset-=t.position,e.path=qe.transform(a,t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{affinity:"forward"})))}else e.path=qe.transform(a,t,r)}}))}},$e={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var a=Ze.transform(r,t,{affinity:n});e.current=a,null==a&&e.unref()}}};function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ye={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:a}=e;return Ye.isBackward(e)===r?[n,a]:[a,n]},end(e){var[,t]=Ye.edges(e);return t},equals:(e,t)=>Ze.equals(e.anchor,t.anchor)&&Ze.equals(e.focus,t.focus),includes(e,t){if(Ye.isRange(t)){if(Ye.includes(e,t.anchor)||Ye.includes(e,t.focus))return!0;var[r,n]=Ye.edges(e),[a,o]=Ye.edges(t);return Ze.isBefore(r,a)&&Ze.isAfter(n,o)}var[i,s]=Ye.edges(e),l=!1,c=!1;return Ze.isPoint(t)?(l=Ze.compare(t,i)>=0,c=Ze.compare(t,s)<=0):(l=qe.compare(t,i.path)>=0,c=qe.compare(t,s.path)<=0),l&&c},intersection(e,t){var r=we(e,["anchor","focus"]),[n,a]=Ye.edges(e),[o,i]=Ye.edges(t),s=Ze.isBefore(n,o)?o:n,l=Ze.isBefore(a,i)?a:i;return Ze.isBefore(l,s)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:s,focus:l},r)},isBackward(e){var{anchor:t,focus:r}=e;return Ze.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return Ze.equals(t,r)},isExpanded:e=>!Ye.isCollapsed(e),isForward:e=>!Ye.isBackward(e),isRange:e=>i(e)&&Ze.isPoint(e.anchor)&&Ze.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Ye.edges(e);return t},transform(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:o="inward"}=a;return"inward"===o?Ye.isForward(e)?(r="forward",n="backward"):(r="backward",n="forward"):"outward"===o?Ye.isForward(e)?(r="backward",n="forward"):(r="forward",n="backward"):(r=o,n=o),ve(e,(e=>{var a=Ze.transform(e.anchor,t,{affinity:r}),o=Ze.transform(e.focus,t,{affinity:n});if(!a||!o)return null;e.anchor=a,e.focus=o}))}},Xe={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var a=Ye.transform(r,t,{affinity:n});e.current=a,null==a&&e.unref()}}};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et={equals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:n=!1}=r;for(var a in e)if((!n||"text"!==a)&&e[a]!==t[a])return!1;for(var o in t)if((!n||"text"!==o)&&e[o]!==t[o])return!1;return!0},isText:e=>i(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&(0===e.length||et.isText(e[0])),matches(e,t){for(var r in t)if("text"!==r&&e[r]!==t[r])return!1;return!0},decorations(e,t){var r=[Qe({},e)];for(var n of t){var a=we(n,["anchor","focus"]),[o,i]=Ye.edges(n),s=[],l=0;for(var c of r){var{length:u}=c.text,f=l;if(l+=u,o.offset<=f&&i.offset>=f+u)Object.assign(c,a),s.push(c);else if(o.offset>f+u||i.offset<f||i.offset===f&&0!==f)s.push(c);else{var d=c,h=void 0,p=void 0;if(i.offset<f+u){var v=i.offset-f;p=Qe({},d,{text:d.text.slice(v)}),d=Qe({},d,{text:d.text.slice(0,v)})}if(o.offset>f){var m=o.offset-f;h=Qe({},d,{text:d.text.slice(0,m)}),d=Qe({},d,{text:d.text.slice(m)})}Object.assign(d,a),h&&s.push(h),s.push(d),p&&s.push(p)}}r=s}return r}};function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ot={insertNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ze.withoutNormalizing(e,(()=>{var{hanging:n=!1,voids:a=!1,mode:o="lowest"}=r,{at:i,match:s,select:l}=r;if(We.isNode(t)&&(t=[t]),0!==t.length){var[c]=t;if(i||(i=e.selection?e.selection:e.children.length>0?ze.end(e,[]):[0],l=!0),null==l&&(l=!1),Ye.isRange(i))if(n||(i=ze.unhangRange(e,i)),Ye.isCollapsed(i))i=i.anchor;else{var[,u]=Ye.edges(i),f=ze.pointRef(e,u);ft.delete(e,{at:i}),i=f.unref()}if(Ze.isPoint(i)){null==s&&(s=et.isText(c)?e=>et.isText(e):e.isInline(c)?t=>et.isText(t)||ze.isInline(e,t):t=>ze.isBlock(e,t));var[d]=ze.nodes(e,{at:i.path,match:s,mode:o,voids:a});if(!d)return;var[,h]=d,p=ze.pathRef(e,h),v=ze.isEnd(e,i,h);ft.splitNodes(e,{at:i,match:s,mode:o,voids:a});var m=p.unref();i=v?qe.next(m):m}var g=qe.parent(i),y=i[i.length-1];if(a||!ze.void(e,{at:g})){for(var w of t){var b=g.concat(y);y++,e.apply({type:"insert_node",path:b,node:w})}if(l){var E=ze.end(e,i);E&&ft.select(e,E)}}}}))},liftNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ze.withoutNormalizing(e,(()=>{var{at:r=e.selection,mode:n="lowest",voids:a=!1}=t,{match:o}=t;if(null==o&&(o=qe.isPath(r)?st(e,r):t=>ze.isBlock(e,t)),r){var i=ze.nodes(e,{at:r,match:o,mode:n,voids:a}),s=Array.from(i,(t=>{var[,r]=t;return ze.pathRef(e,r)}));for(var l of s){var c=l.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var u=ze.node(e,qe.parent(c)),[f,d]=u,h=c[c.length-1],{length:p}=f.children;if(1===p){var v=qe.next(d);ft.moveNodes(e,{at:c,to:v,voids:a}),ft.removeNodes(e,{at:d,voids:a})}else if(0===h)ft.moveNodes(e,{at:c,to:d,voids:a});else if(h===p-1){var m=qe.next(d);ft.moveNodes(e,{at:c,to:m,voids:a})}else{var g=qe.next(c),y=qe.next(d);ft.splitNodes(e,{at:g,voids:a}),ft.moveNodes(e,{at:c,to:y,voids:a})}}}}))},mergeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ze.withoutNormalizing(e,(()=>{var{match:r,at:n=e.selection}=t,{hanging:a=!1,voids:o=!1,mode:i="lowest"}=t;if(n){if(null==r)if(qe.isPath(n)){var[s]=ze.parent(e,n);r=e=>s.children.includes(e)}else r=t=>ze.isBlock(e,t);if(!a&&Ye.isRange(n)&&(n=ze.unhangRange(e,n)),Ye.isRange(n))if(Ye.isCollapsed(n))n=n.anchor;else{var[,l]=Ye.edges(n),c=ze.pointRef(e,l);ft.delete(e,{at:n}),n=c.unref(),null==t.at&&ft.select(e,n)}var[u]=ze.nodes(e,{at:n,match:r,voids:o,mode:i}),f=ze.previous(e,{at:n,match:r,voids:o,mode:i});if(u&&f){var[d,h]=u,[p,v]=f;if(0!==h.length&&0!==v.length){var m,g,y=qe.next(v),w=qe.common(h,v),b=qe.isSibling(h,v),E=Array.from(ze.levels(e,{at:h}),(e=>{var[t]=e;return t})).slice(w.length).slice(0,-1),x=ze.above(e,{at:h,mode:"highest",match:e=>E.includes(e)&&Re.isElement(e)&&1===e.children.length}),O=x&&ze.pathRef(e,x[1]);if(et.isText(d)&&et.isText(p)){var k=we(d,["text"]);g=p.text.length,m=k}else{if(!Re.isElement(d)||!Re.isElement(p))throw new Error("Cannot merge the node at path [".concat(h,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(d)," ").concat(JSON.stringify(p)));k=we(d,["children"]);g=p.children.length,m=k}b||ft.moveNodes(e,{at:h,to:y,voids:o}),O&&ft.removeNodes(e,{at:O.current,voids:o}),Re.isElement(p)&&ze.isEmpty(e,p)||et.isText(p)&&""===p.text?ft.removeNodes(e,{at:v,voids:o}):e.apply({type:"merge_node",path:y,position:g,properties:m}),O&&O.unref()}}}}))},moveNodes(e,t){ze.withoutNormalizing(e,(()=>{var{to:r,at:n=e.selection,mode:a="lowest",voids:o=!1}=t,{match:i}=t;if(n){null==i&&(i=qe.isPath(n)?st(e,n):t=>ze.isBlock(e,t));var s=ze.pathRef(e,r),l=ze.nodes(e,{at:n,match:i,mode:a,voids:o}),c=Array.from(l,(t=>{var[,r]=t;return ze.pathRef(e,r)}));for(var u of c){var f=u.unref(),d=s.current;0!==f.length&&e.apply({type:"move_node",path:f,newPath:d})}s.unref()}}))},removeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ze.withoutNormalizing(e,(()=>{var{hanging:r=!1,voids:n=!1,mode:a="lowest"}=t,{at:o=e.selection,match:i}=t;if(o){null==i&&(i=qe.isPath(o)?st(e,o):t=>ze.isBlock(e,t)),!r&&Ye.isRange(o)&&(o=ze.unhangRange(e,o));var s=ze.nodes(e,{at:o,match:i,mode:a,voids:n}),l=Array.from(s,(t=>{var[,r]=t;return ze.pathRef(e,r)}));for(var c of l){var u=c.unref();if(u){var[f]=ze.node(e,u);e.apply({type:"remove_node",path:u,node:f})}}}}))},setNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ze.withoutNormalizing(e,(()=>{var{match:n,at:a=e.selection}=r,{hanging:o=!1,mode:i="lowest",split:s=!1,voids:l=!1}=r;if(a){if(null==n&&(n=qe.isPath(a)?st(e,a):t=>ze.isBlock(e,t)),!o&&Ye.isRange(a)&&(a=ze.unhangRange(e,a)),s&&Ye.isRange(a)){var c=ze.rangeRef(e,a,{affinity:"inward"}),[u,f]=Ye.edges(a),d="lowest"===i?"lowest":"highest";ft.splitNodes(e,{at:f,match:n,mode:d,voids:l}),ft.splitNodes(e,{at:u,match:n,mode:d,voids:l}),a=c.unref(),null==r.at&&ft.select(e,a)}for(var[h,p]of ze.nodes(e,{at:a,match:n,mode:i,voids:l})){var v={},m={};if(0!==p.length){for(var g in t)"children"!==g&&"text"!==g&&t[g]!==h[g]&&(v[g]=h[g],m[g]=t[g]);0!==Object.keys(m).length&&e.apply({type:"set_node",path:p,properties:v,newProperties:m})}}}}))},splitNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ze.withoutNormalizing(e,(()=>{var{mode:r="lowest",voids:n=!1}=t,{match:a,at:o=e.selection,height:i=0,always:s=!1}=t;if(null==a&&(a=t=>ze.isBlock(e,t)),Ye.isRange(o)&&(o=it(e,o)),qe.isPath(o)){var l=o,c=ze.point(e,l),[u]=ze.parent(e,l);a=e=>e===u,i=c.path.length-l.length+1,o=c,s=!0}if(o){var f=ze.pointRef(e,o,{affinity:"backward"}),[d]=ze.nodes(e,{at:o,match:a,mode:r,voids:n});if(d){var h=ze.void(e,{at:o,mode:"highest"});if(!n&&h){var[p,v]=h;if(Re.isElement(p)&&e.isInline(p)){var m=ze.after(e,v);if(!m){var g=qe.next(v);ft.insertNodes(e,{text:""},{at:g,voids:n}),m=ze.point(e,g)}o=m,s=!0}i=o.path.length-v.length+1,s=!0}var y=ze.pointRef(e,o),w=o.path.length-i,[,b]=d,E=o.path.slice(0,w),x=0===i?o.offset:o.path[w]+0;for(var[O,k]of ze.levels(e,{at:E,reverse:!0,voids:n})){var P=!1;if(k.length<b.length||0===k.length||!n&&ze.isVoid(e,O))break;var F=f.current,C=ze.isEnd(e,F,k);if(s||!f||!ze.isEdge(e,F,k)){P=!0;var j=we(O,["text","children"]);e.apply({type:"split_node",path:k,position:x,properties:j})}x=k[k.length-1]+(P||C?1:0)}if(null==t.at){var D=y.current||ze.end(e,[]);ft.select(e,D)}f.unref(),y.unref()}}}))},unsetNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var a of t)n[a]=null;ft.setNodes(e,n,r)},unwrapNodes(e,t){ze.withoutNormalizing(e,(()=>{var{mode:r="lowest",split:n=!1,voids:a=!1}=t,{at:o=e.selection,match:i}=t;if(o){null==i&&(i=qe.isPath(o)?st(e,o):t=>ze.isBlock(e,t)),qe.isPath(o)&&(o=ze.range(e,o));var s=Ye.isRange(o)?ze.rangeRef(e,o):null,l=ze.nodes(e,{at:o,match:i,mode:r,voids:a}),c=Array.from(l,(t=>{var[,r]=t;return ze.pathRef(e,r)})),u=function(t){var r=t.unref(),[o]=ze.node(e,r),i=ze.range(e,r);n&&s&&(i=Ye.intersection(s.current,i)),ft.liftNodes(e,{at:i,match:e=>o.children.includes(e),voids:a})};for(var f of c)u(f);s&&s.unref()}}))},wrapNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ze.withoutNormalizing(e,(()=>{var{mode:n="lowest",split:a=!1,voids:o=!1}=r,{match:i,at:s=e.selection}=r;if(s){if(null==i&&(i=qe.isPath(s)?st(e,s):e.isInline(t)?t=>ze.isInline(e,t)||et.isText(t):t=>ze.isBlock(e,t)),a&&Ye.isRange(s)){var[l,c]=Ye.edges(s),u=ze.rangeRef(e,s,{affinity:"inward"});ft.splitNodes(e,{at:c,match:i,voids:o}),ft.splitNodes(e,{at:l,match:i,voids:o}),s=u.unref(),null==r.at&&ft.select(e,s)}var f=Array.from(ze.nodes(e,{at:s,match:e.isInline(t)?t=>ze.isBlock(e,t):e=>ze.isEditor(e),mode:"lowest",voids:o}));for(var[,d]of f){var h=Ye.isRange(s)?Ye.intersection(s,ze.range(e,d)):s;if(h){var p=Array.from(ze.nodes(e,{at:h,match:i,mode:n,voids:o}));p.length>0&&function(){var[r]=p,n=p[p.length-1],[,a]=r,[,i]=n,s=qe.equals(a,i)?qe.parent(a):qe.common(a,i),l=ze.range(e,a,i),c=ze.node(e,s),[u]=c,f=s.length+1,d=qe.next(i.slice(0,f)),h=at({},t,{children:[]});ft.insertNodes(e,h,{at:d,voids:o}),ft.moveNodes(e,{at:l,match:e=>u.children.includes(e),to:d.concat(0),voids:o})}()}}}}))}},it=(e,t)=>{if(Ye.isCollapsed(t))return t.anchor;var[,r]=Ye.edges(t),n=ze.pointRef(e,r);return ft.delete(e,{at:t}),n.unref()},st=(e,t)=>{var[r]=ze.node(e,t);return e=>e===r};function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ft=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{transform(e,t){e.children=me(e.children);var r=e.selection&&me(e.selection);switch(t.type){case"insert_node":var{path:n,node:a}=t,o=We.parent(e,n),i=n[n.length-1];if(o.children.splice(i,0,a),r)for(var[s,l]of Ye.points(r))r[l]=Ze.transform(s,t);break;case"insert_text":var{path:c,offset:u,text:f}=t,d=We.leaf(e,c),h=d.text.slice(0,u),p=d.text.slice(u);if(d.text=h+f+p,r)for(var[v,m]of Ye.points(r))r[m]=Ze.transform(v,t);break;case"merge_node":var{path:g}=t,y=We.get(e,g),w=qe.previous(g),b=We.get(e,w),x=We.parent(e,g),O=g[g.length-1];if(et.isText(y)&&et.isText(b))b.text+=y.text;else{if(et.isText(y)||et.isText(b))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(g,"] to nodes of different interaces: ").concat(y," ").concat(b));b.children.push(...y.children)}if(x.children.splice(O,1),r)for(var[k,P]of Ye.points(r))r[P]=Ze.transform(k,t);break;case"move_node":var{path:F,newPath:C}=t;if(qe.isAncestor(F,C))throw new Error("Cannot move a path [".concat(F,"] to new path [").concat(C,"] because the destination is inside itself."));var j=We.get(e,F),D=We.parent(e,F),S=F[F.length-1];D.children.splice(S,1);var A=qe.transform(F,t),N=We.get(e,qe.parent(A)),B=A[A.length-1];if(N.children.splice(B,0,j),r)for(var[M,_]of Ye.points(r))r[_]=Ze.transform(M,t);break;case"remove_node":var{path:T}=t,z=T[T.length-1];if(We.parent(e,T).children.splice(z,1),r)for(var[R,L]of Ye.points(r)){var W=Ze.transform(R,t);if(null!=r&&null!=W)r[L]=W;else{var I=void 0,H=void 0;for(var[V,q]of We.texts(e)){if(-1!==qe.compare(q,T)){H=[V,q];break}I=[V,q]}I?(R.path=I[1],R.offset=I[0].text.length):H?(R.path=H[1],R.offset=0):r=null}}break;case"remove_text":var{path:K,offset:U,text:Z}=t,$=We.leaf(e,K),J=$.text.slice(0,U),Y=$.text.slice(U+Z.length);if($.text=J+Y,r)for(var[X,G]of Ye.points(r))r[G]=Ze.transform(X,t);break;case"set_node":var{path:Q,newProperties:ee}=t;if(0===Q.length)throw new Error("Cannot set properties on the root node!");var te=We.get(e,Q);for(var re in ee){if("children"===re||"text"===re)throw new Error('Cannot set the "'.concat(re,'" property of nodes!'));var ne=ee[re];null==ne?delete te[re]:te[re]=ne}break;case"set_selection":var{newProperties:ae}=t;if(null==ae)r=ae;else if(null==r){if(!Ye.isRange(ae))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(ae)," when there is no current selection."));r=ae}else Object.assign(r,ae);break;case"split_node":var{path:oe,position:ie,properties:se}=t;if(0===oe.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(oe,"] because the root node cannot be split."));var le,ce=We.get(e,oe),ue=We.parent(e,oe),fe=oe[oe.length-1];if(et.isText(ce)){var de=ce.text.slice(0,ie),he=ce.text.slice(ie);ce.text=de,le=rt({},ce,{},se,{text:he})}else{var pe=ce.children.slice(0,ie),ve=ce.children.slice(ie);ce.children=pe,le=rt({},ce,{},se,{children:ve})}if(ue.children.splice(fe+1,0,le),r)for(var[ye,we]of Ye.points(r))r[we]=Ze.transform(ye,t)}e.children=ge(e.children),e.selection=r?E(r)?ge(r):r:null}},{},ot,{},{collapse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n)if("anchor"===r)ft.select(e,n.anchor);else if("focus"===r)ft.select(e,n.focus);else if("start"===r){var[a]=Ye.edges(n);ft.select(e,a)}else if("end"===r){var[,o]=Ye.edges(n);ft.select(e,o)}},deselect(e){var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:a="character",reverse:o=!1}=t,{edge:i=null}=t;if(r){"start"===i&&(i=Ye.isBackward(r)?"focus":"anchor"),"end"===i&&(i=Ye.isBackward(r)?"anchor":"focus");var{anchor:s,focus:l}=r,c={distance:n,unit:a},u={};if(null==i||"anchor"===i){var f=o?ze.before(e,s,c):ze.after(e,s,c);f&&(u.anchor=f)}if(null==i||"focus"===i){var d=o?ze.before(e,l,c):ze.after(e,l,c);d&&(u.focus=d)}ft.setSelection(e,u)}},select(e,t){var{selection:r}=e;if(t=ze.range(e,t),r)ft.setSelection(e,t);else{if(!Ye.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint(e,t,r){var{selection:n}=e,{edge:a="both"}=r;if(n){"start"===a&&(a=Ye.isBackward(n)?"focus":"anchor"),"end"===a&&(a=Ye.isBackward(n)?"anchor":"focus");var{anchor:o,focus:i}=n,s="anchor"===a?o:i;ft.setSelection(e,{["anchor"===a?"anchor":"focus"]:ct({},s,{},t)})}},setSelection(e,t){var{selection:r}=e,n={},a={};if(r){for(var o in t)("anchor"===o&&null!=t.anchor&&!Ze.equals(t.anchor,r.anchor)||"focus"===o&&null!=t.focus&&!Ze.equals(t.focus,r.focus)||"anchor"!==o&&"focus"!==o&&t[o]!==r[o])&&(n[o]=r[o],a[o]=t[o]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:a})}}},{},{delete(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ze.withoutNormalizing(e,(()=>{var{reverse:r=!1,unit:n="character",distance:a=1,voids:o=!1}=t,{at:i=e.selection,hanging:s=!1}=t;if(i){if(Ye.isRange(i)&&Ye.isCollapsed(i)&&(i=i.anchor),Ze.isPoint(i)){var l=ze.void(e,{at:i,mode:"highest"});if(!o&&l){var[,c]=l;i=c}else{var u={unit:n,distance:a};i={anchor:i,focus:r?ze.before(e,i,u)||ze.start(e,[]):ze.after(e,i,u)||ze.end(e,[])},s=!0}}if(qe.isPath(i))ft.removeNodes(e,{at:i,voids:o});else if(!Ye.isCollapsed(i)){s||(i=ze.unhangRange(e,i,{voids:o}));var[f,d]=Ye.edges(i),h=ze.above(e,{match:t=>ze.isBlock(e,t),at:f,voids:o}),p=ze.above(e,{match:t=>ze.isBlock(e,t),at:d,voids:o}),v=h&&p&&!qe.equals(h[1],p[1]),m=qe.equals(f.path,d.path),g=o?null:ze.void(e,{at:f,mode:"highest"}),y=o?null:ze.void(e,{at:d,mode:"highest"});if(g){var w=ze.before(e,f);w&&h&&qe.isAncestor(h[1],w.path)&&(f=w)}if(y){var b=ze.after(e,d);b&&p&&qe.isAncestor(p[1],b.path)&&(d=b)}var E,x=[];for(var O of ze.nodes(e,{at:i,voids:o})){var[k,P]=O;E&&0===qe.compare(P,E)||(!o&&ze.isVoid(e,k)||!qe.isCommon(P,f.path)&&!qe.isCommon(P,d.path))&&(x.push(O),E=P)}var F=Array.from(x,(t=>{var[,r]=t;return ze.pathRef(e,r)})),C=ze.pointRef(e,f),j=ze.pointRef(e,d);if(!m&&!g){var D=C.current,[S]=ze.leaf(e,D),{path:A}=D,{offset:N}=f,B=S.text.slice(N);e.apply({type:"remove_text",path:A,offset:N,text:B})}for(var M of F){var _=M.unref();ft.removeNodes(e,{at:_,voids:o})}if(!y){var T=j.current,[z]=ze.leaf(e,T),{path:R}=T,L=m?f.offset:0,W=z.text.slice(L,d.offset);e.apply({type:"remove_text",path:R,offset:L,text:W})}!m&&v&&j.current&&C.current&&ft.mergeNodes(e,{at:j.current,hanging:!0,voids:o});var I=j.unref()||C.unref();null==t.at&&I&&ft.select(e,I)}}}))},insertFragment(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ze.withoutNormalizing(e,(()=>{var{hanging:n=!1,voids:a=!1}=r,{at:o=e.selection}=r;if(t.length&&o){if(Ye.isRange(o))if(n||(o=ze.unhangRange(e,o)),Ye.isCollapsed(o))o=o.anchor;else{var[,i]=Ye.edges(o);if(!a&&ze.void(e,{at:i}))return;var s=ze.pointRef(e,i);ft.delete(e,{at:o}),o=s.unref()}else qe.isPath(o)&&(o=ze.start(e,o));if(a||!ze.void(e,{at:o})){var l=ze.above(e,{at:o,match:t=>ze.isInline(e,t),mode:"highest",voids:a});if(l){var[,c]=l;if(ze.isEnd(e,o,c))o=ze.after(e,c);else if(ze.isStart(e,o,c)){o=ze.before(e,c)}}var u=ze.above(e,{match:t=>ze.isBlock(e,t),at:o,voids:a}),[,f]=u,d=ze.isStart(e,o,f),h=ze.isEnd(e,o,f),p=!d||d&&h,v=!h,[,m]=We.first({children:t},[]),[,g]=We.last({children:t},[]),y=[],w=t=>{var[r,n]=t;return!(p&&qe.isAncestor(n,m)&&Re.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(v&&qe.isAncestor(n,g)&&Re.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))};for(var b of We.nodes({children:t},{pass:w}))b[1].length>0&&w(b)&&y.push(b);var E=[],x=[],O=[],k=!0,P=!1;for(var[F]of y)Re.isElement(F)&&!e.isInline(F)?(k=!1,P=!0,x.push(F)):k?E.push(F):O.push(F);var[C]=ze.nodes(e,{at:o,match:t=>et.isText(t)||ze.isInline(e,t),mode:"highest",voids:a}),[,j]=C,D=ze.isStart(e,o,j),S=ze.isEnd(e,o,j),A=ze.pathRef(e,h?qe.next(f):f),N=ze.pathRef(e,S?qe.next(j):j);ft.splitNodes(e,{at:o,match:t=>P?ze.isBlock(e,t):et.isText(t)||ze.isInline(e,t),mode:P?"lowest":"highest",voids:a});var B=ze.pathRef(e,!D||D&&S?qe.next(j):j);if(ft.insertNodes(e,E,{at:B.current,match:t=>et.isText(t)||ze.isInline(e,t),mode:"highest",voids:a}),ft.insertNodes(e,x,{at:A.current,match:t=>ze.isBlock(e,t),mode:"lowest",voids:a}),ft.insertNodes(e,O,{at:N.current,match:t=>et.isText(t)||ze.isInline(e,t),mode:"highest",voids:a}),!r.at){var M;M=O.length>0?qe.previous(N.current):x.length>0?qe.previous(A.current):qe.previous(B.current);var _=ze.end(e,M);ft.select(e,_)}B.unref(),A.unref(),N.unref()}}}))},insertText(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ze.withoutNormalizing(e,(()=>{var{voids:n=!1}=r,{at:a=e.selection}=r;if(a){if(qe.isPath(a)&&(a=ze.range(e,a)),Ye.isRange(a))if(Ye.isCollapsed(a))a=a.anchor;else{var o=Ye.end(a);if(!n&&ze.void(e,{at:o}))return;var i=ze.pointRef(e,o);ft.delete(e,{at:a,voids:n}),a=i.unref(),ft.setSelection(e,{anchor:a,focus:a})}if(n||!ze.void(e,{at:a})){var{path:s,offset:l}=a;e.apply({type:"insert_text",path:s,offset:l,text:t})}}}))}});function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pt=()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:t=>{for(var r of ze.pathRefs(e))Ke.transform(r,t);for(var n of ze.pointRefs(e))$e.transform(n,t);for(var a of ze.rangeRefs(e))Xe.transform(a,t);var o=new Set,i=[],s=e=>{if(e){var t=e.join(",");o.has(t)||(o.add(t),i.push(e))}},l=be.get(e)||[],c=vt(t);for(var u of l){s(qe.transform(u,t))}for(var f of c)s(f);be.set(e,i),ft.transform(e,t),e.operations.push(t),ze.normalize(e),"set_selection"===t.type&&(e.marks=null),Ee.get(e)||(Ee.set(e,!0),Promise.resolve().then((()=>{Ee.set(e,!1),e.onChange(),e.operations=[]})))},addMark:(t,r)=>{var{selection:n}=e;if(n)if(Ye.isExpanded(n))ft.setNodes(e,{[t]:r},{match:et.isText,split:!0});else{var a=ht({},ze.marks(e)||{},{[t]:r});e.marks=a,e.onChange()}},deleteBackward:t=>{var{selection:r}=e;r&&Ye.isCollapsed(r)&&ft.delete(e,{unit:t,reverse:!0})},deleteForward:t=>{var{selection:r}=e;r&&Ye.isCollapsed(r)&&ft.delete(e,{unit:t})},deleteFragment:()=>{var{selection:t}=e;t&&Ye.isExpanded(t)&&ft.delete(e)},getFragment:()=>{var{selection:t}=e;return t?We.fragment(e,t):[]},insertBreak:()=>{ft.splitNodes(e,{always:!0})},insertFragment:t=>{ft.insertFragment(e,t)},insertNode:t=>{ft.insertNodes(e,t)},insertText:t=>{var{selection:r,marks:n}=e;if(r){if(Ye.isCollapsed(r)){var a=ze.above(e,{match:t=>ze.isInline(e,t),mode:"highest"});if(a){var[,o]=a;if(ze.isEnd(e,r.anchor,o)){var i=ze.after(e,o);ft.setSelection(e,{anchor:i,focus:i})}}}if(n){var s=ht({text:t},n);ft.insertNodes(e,s)}else ft.insertText(e,t);e.marks=null}},normalizeNode:t=>{var[r,n]=t;if(!et.isText(r))if(Re.isElement(r)&&0===r.children.length){ft.insertNodes(e,{text:""},{at:n.concat(0),voids:!0})}else for(var a=!ze.isEditor(r)&&(Re.isElement(r)&&(e.isInline(r)||0===r.children.length||et.isText(r.children[0])||e.isInline(r.children[0]))),o=0,i=0;i<r.children.length;i++,o++){var s=r.children[i],l=r.children[i-1],c=i===r.children.length-1;if((et.isText(s)||Re.isElement(s)&&e.isInline(s))!==a)ft.removeNodes(e,{at:n.concat(o),voids:!0}),o--;else if(Re.isElement(s)){if(e.isInline(s))if(null!=l&&et.isText(l)){if(c){ft.insertNodes(e,{text:""},{at:n.concat(o+1),voids:!0}),o++}}else{ft.insertNodes(e,{text:""},{at:n.concat(o),voids:!0}),o++}}else null!=l&&et.isText(l)&&(et.equals(s,l,{loose:!0})?(ft.mergeNodes(e,{at:n.concat(o),voids:!0}),o--):""===l.text?(ft.removeNodes(e,{at:n.concat(o-1),voids:!0}),o--):c&&""===s.text&&(ft.removeNodes(e,{at:n.concat(o),voids:!0}),o--))}},removeMark:t=>{var{selection:r}=e;if(r)if(Ye.isExpanded(r))ft.unsetNodes(e,t,{match:et.isText,split:!0});else{var n=ht({},ze.marks(e)||{});delete n[t],e.marks=n,e.onChange()}}};return e},vt=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":var{path:t}=e;return qe.levels(t);case"insert_node":var{node:r,path:n}=e;return[...qe.levels(n),...et.isText(r)?[]:Array.from(We.nodes(r),(e=>{var[,t]=e;return n.concat(t)}))];case"merge_node":var{path:a}=e;return[...qe.ancestors(a),qe.previous(a)];case"move_node":var{path:o,newPath:i}=e;if(qe.equals(o,i))return[];var s=[],l=[];for(var c of qe.ancestors(o)){var u=qe.transform(c,e);s.push(u)}for(var f of qe.ancestors(i)){var d=qe.transform(f,e);l.push(d)}return[...s,...l];case"remove_node":var{path:h}=e;return[...qe.ancestors(h)];case"split_node":var{path:p}=e;return[...qe.levels(p),qe.next(p)];default:return[]}},mt=r(3493),gt=r.n(mt);function yt(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function wt(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function bt(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return wt(r.overflowY,t)||wt(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Et(e,t,r,n,a,o,i,s){return o<e&&i>t||o>e&&i<t?0:o<=e&&s<=r||i>=t&&s>=r?o-e-n:i>t&&s<r||o<e&&s>r?i-t+a:0}function xt(e,t){var r=window,n=t.scrollMode,a=t.block,o=t.inline,i=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof i?i:function(e){return e!==i};if(!yt(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],f=e;yt(f)&&l(f);){if((f=f.parentElement)===c){u.push(f);break}null!=f&&f===document.body&&bt(f)&&!bt(document.documentElement)||null!=f&&bt(f,s)&&u.push(f)}for(var d=r.visualViewport?r.visualViewport.width:innerWidth,h=r.visualViewport?r.visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,m=e.getBoundingClientRect(),g=m.height,y=m.width,w=m.top,b=m.right,E=m.bottom,x=m.left,O="start"===a||"nearest"===a?w:"end"===a?E:w+g/2,k="center"===o?x+y/2:"end"===o?b:x,P=[],F=0;F<u.length;F++){var C=u[F],j=C.getBoundingClientRect(),D=j.height,S=j.width,A=j.top,N=j.right,B=j.bottom,M=j.left;if("if-needed"===n&&w>=0&&x>=0&&E<=h&&b<=d&&w>=A&&E<=B&&x>=M&&b<=N)return P;var _=getComputedStyle(C),T=parseInt(_.borderLeftWidth,10),z=parseInt(_.borderTopWidth,10),R=parseInt(_.borderRightWidth,10),L=parseInt(_.borderBottomWidth,10),W=0,I=0,H="offsetWidth"in C?C.offsetWidth-C.clientWidth-T-R:0,V="offsetHeight"in C?C.offsetHeight-C.clientHeight-z-L:0;if(c===C)W="start"===a?O:"end"===a?O-h:"nearest"===a?Et(v,v+h,h,z,L,v+O,v+O+g,g):O-h/2,I="start"===o?k:"center"===o?k-d/2:"end"===o?k-d:Et(p,p+d,d,T,R,p+k,p+k+y,y),W=Math.max(0,W+v),I=Math.max(0,I+p);else{W="start"===a?O-A-z:"end"===a?O-B+L+V:"nearest"===a?Et(A,B,D,z,L+V,O,O+g,g):O-(A+D/2)+V/2,I="start"===o?k-M-T:"center"===o?k-(M+S/2)+H/2:"end"===o?k-N+R+H:Et(M,N,S,T,R+H,k,k+y,y);var q=C.scrollLeft,K=C.scrollTop;O+=K-(W=Math.max(0,Math.min(K+W,C.scrollHeight-D+V))),k+=q-(I=Math.max(0,Math.min(q+I,C.scrollWidth-S+H)))}P.push({el:C,top:W,left:I})}return P}function Ot(e){return e===Object(e)&&0!==Object.keys(e).length}const kt=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(Ot(t)&&"function"==typeof t.behavior)return t.behavior(r?[]:xt(e,t));if(!r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:Ot(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,a=e.top,o=e.left;n.scroll&&r?n.scroll({top:a,left:o,behavior:t}):(n.scrollTop=a,n.scrollLeft=o)}))}(xt(e,n),n.behavior)}};var Pt=r(6907),Ft=r.n(Pt),Ct=r(3935),jt=r(8156);function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var At=0;class Nt{constructor(){this.id="".concat(At++)}}var Bt=new WeakMap,Mt=new WeakMap,_t=new WeakMap,Tt=new WeakMap,zt=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,Wt=new WeakMap,It=new WeakMap,Ht=new WeakMap,Vt=Symbol("placeholder"),qt=e=>Kt(e)&&1===e.nodeType,Kt=e=>e instanceof Node,Ut=e=>Kt(e)&&3===e.nodeType,Zt=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],i=t,s=!1,l=!1;(Kt(n=o)&&8===n.nodeType||qt(o)&&0===o.childNodes.length||qt(o)&&"false"===o.getAttribute("contenteditable"))&&(!s||!l);)i>=a.length?(s=!0,i=t-1,r="backward"):i<0?(l=!0,i=t+1,r="forward"):(o=a[i],i+="forward"===r?1:-1);return o},$t=e=>{var t="";if(Ut(e)&&e.nodeValue)return e.nodeValue;if(qt(e)){for(var r of Array.from(e.childNodes))t+=$t(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},Jt={findKey(e,t){var r=Lt.get(t);return r||(r=new Nt,Lt.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var a=Mt.get(n);if(null==a){if(ze.isEditor(n))return r;break}var o=Bt.get(n);if(null==o)break;r.unshift(o),n=a}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},isFocused:e=>!!It.get(e),isReadOnly:e=>!!Wt.get(e),blur(e){var t=Jt.toDOMNode(e,e);It.set(e,!1),window.document.activeElement===t&&t.blur()},focus(e){var t=Jt.toDOMNode(e,e);It.set(e,!0),window.document.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){var{selection:t}=e,r=window.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&ft.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=Jt.toDOMNode(e,e);try{r=qt(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&(r.closest("[data-slate-editor]")===o&&(!a||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},insertData(e,t){e.insertData(t)},setFragmentData(e,t){e.setFragmentData(t)},toDOMNode(e,t){var r=ze.isEditor(t)?_t.get(e):zt.get(Jt.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return r},toDOMPoint(e,t){var r,[n]=ze.node(e,t.path),a=Jt.toDOMNode(e,n);ze.void(e,{at:t})&&(t={path:t.path,offset:0});var o=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0;for(var s of o){var l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:c}=l.textContent,u=s.getAttribute("data-slate-length"),f=i+(null==u?c:parseInt(u,10));if(t.offset<=f){r=[l,Math.min(c,Math.max(0,t.offset-i))];break}i=f}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,a=Ye.isBackward(t),o=Jt.toDOMPoint(e,r),i=Ye.isCollapsed(t)?o:Jt.toDOMPoint(e,n),s=window.document.createRange(),[l,c]=a?i:o,[u,f]=a?o:i,d=!!(qt(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),h=!!(qt(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,d?1:c),s.setEnd(u,h?1:f),s},toSlateNode(e,t){var r=qt(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?Tt.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o,i=Jt.toSlateNode(e,t.target),s=Jt.findPath(e,i);if(ze.isVoid(e,i)){var l=a.getBoundingClientRect(),c=e.isInline(i)?r-l.left<l.left+l.width-r:n-l.top<l.top+l.height-n,u=ze.point(e,s,{edge:c?"start":"end"}),f=c?ze.before(e,u):ze.after(e,u);if(f)return ze.range(e,f)}var{document:d}=window;if(d.caretRangeFromPoint)o=d.caretRangeFromPoint(r,n);else{var h=d.caretPositionFromPoint(r,n);h&&((o=d.createRange()).setStart(h.offsetNode,h.offset),o.setEnd(h.offsetNode,h.offset))}if(!o)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Jt.toSlateRange(e,o)},toSlatePoint(e,t){var[r,n]=(e=>{var[t,r]=e;if(qt(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?"backward":"forward";for(t=Zt(t,n?r-1:r,a);qt(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=Zt(t,o,a)}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),a=r.parentNode,o=null,i=0;if(a){var s=a.closest('[data-slate-void="true"]'),l=a.closest("[data-slate-leaf]"),c=null;if(l){o=l.closest('[data-slate-node="text"]');var u=window.document.createRange();u.setStart(o,0),u.setEnd(r,n);var f=u.cloneContents();[...f.querySelectorAll("[data-slate-zero-width]"),...f.querySelectorAll("[contenteditable=false]")].forEach((e=>{e.parentNode.removeChild(e)})),i=f.textContent.length,c=o}else s&&(o=(l=s.querySelector("[data-slate-leaf]")).closest('[data-slate-node="text"]'),i=(c=l).textContent.length);c&&i===c.textContent.length&&a.hasAttribute("data-slate-zero-width")&&i--}if(!o)throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t));var d=Jt.toSlateNode(e,o);return{path:Jt.findPath(e,d),offset:i}},toSlateRange(e,t){var r,n,a,o,i;if((t instanceof Selection?t.anchorNode:t.startContainer)&&(t instanceof Selection?(r=t.anchorNode,n=t.anchorOffset,a=t.focusNode,o=t.focusOffset,i=t.isCollapsed):(r=t.startContainer,n=t.startOffset,a=t.endContainer,o=t.endOffset,i=t.collapsed)),null==r||null==a||null==n||null==o)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var s=Jt.toSlatePoint(e,[r,n]);return{anchor:s,focus:i?s:Jt.toSlatePoint(e,[a,o])}}},Yt=(0,n.createContext)(!1),Xt=(0,n.createContext)(null),Gt=()=>{var e=(0,n.useContext)(Xt);if(!e)throw new Error("The `useEditor` hook must be used inside the <Slate> component's context.");return e},Qt=(0,n.createContext)(null),er=()=>{var e=(0,n.useContext)(Qt);if(!e)throw new Error("The `useSlate` hook must be used inside the <SlateProvider> component's context.");var[t]=e;return t},tr=e=>{var{editor:t,children:r,onChange:a,value:o}=e,i=St(e,["editor","children","onChange","value"]),[s,l]=(0,n.useState)(0),c=(0,n.useMemo)((()=>(t.children=o,Object.assign(t,i),[t])),[s,o,...Object.values(i)]),u=(0,n.useCallback)((()=>{a(t.children),l(s+1)}),[s,a]);return Ht.set(t,u),(0,n.useEffect)((()=>()=>{Ht.set(t,(()=>{}))}),[]),n.createElement(Qt.Provider,{value:c},n.createElement(Xt.Provider,{value:t},n.createElement(Yt.Provider,{value:Jt.isFocused(t)},r)))},rr=(0,n.createContext)(!1),nr=(0,n.createContext)(!1),ar=e=>{var{isLast:t,leaf:r,parent:a,text:o}=e,i=Gt(),s=Jt.findPath(i,o),l=qe.parent(s);return i.isVoid(a)?n.createElement(ir,{length:We.string(a).length}):""!==r.text||a.children[a.children.length-1]!==o||i.isInline(a)||""!==ze.string(i,l)?""===r.text?n.createElement(ir,null):t&&"\n"===r.text.slice(-1)?n.createElement(or,{isTrailing:!0,text:r.text}):n.createElement(or,{text:r.text}):n.createElement(ir,{isLineBreak:!0})},or=e=>{var{text:t,isTrailing:r=!1}=e;return n.createElement("span",{"data-slate-string":!0},t,r?"\n":null)},ir=e=>{var{length:t=0,isLineBreak:r=!1}=e;return n.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?n.createElement("br",null):null)},sr=n.memo((e=>{var{leaf:t,isLast:r,text:a,parent:o,renderLeaf:i=(e=>n.createElement(lr,Object.assign({},e)))}=e,s=n.createElement(ar,{isLast:r,leaf:t,parent:o,text:a});t[Vt]&&(s=n.createElement(n.Fragment,null,n.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333",userSelect:"none",fontStyle:"normal",fontWeight:"normal",textDecoration:"none"}},t.placeholder),s));return i({attributes:{"data-slate-leaf":!0},children:s,leaf:t,text:a})}),((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&et.matches(t.leaf,e.leaf))),lr=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},cr="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,ur=n.memo((e=>{for(var{decorations:t,isLast:r,parent:a,renderLeaf:o,text:i}=e,s=Gt(),l=(0,n.useRef)(null),c=et.decorations(i,t),u=Jt.findKey(s,i),f=[],d=0;d<c.length;d++){var h=c[d];f.push(n.createElement(sr,{isLast:r&&d===c.length-1,key:"".concat(u.id,"-").concat(d),leaf:h,text:i,parent:a,renderLeaf:o}))}return cr((()=>{l.current?(zt.set(u,l.current),Rt.set(i,l.current),Tt.set(l.current,i)):(zt.delete(u),Rt.delete(i))})),n.createElement("span",{"data-slate-node":"text",ref:l},f)}),((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text)),fr=n.memo((e=>{var{decorate:t,decorations:r,element:a,renderElement:o=(e=>n.createElement(dr,Object.assign({},e))),renderLeaf:i,selection:s}=e,l=(0,n.useRef)(null),c=Gt(),u=(0,n.useContext)(rr),f=c.isInline(a),d=Jt.findKey(c,a),h=n.createElement(pr,{decorate:t,decorations:r,node:a,renderElement:o,renderLeaf:i,selection:s}),p={"data-slate-node":"element",ref:l};if(f&&(p["data-slate-inline"]=!0),!f&&ze.hasInlines(c,a)){var v=We.string(a),m=Ft()(v);"rtl"===m&&(p.dir=m)}if(ze.isVoid(c,a)){p["data-slate-void"]=!0,!u&&f&&(p.contentEditable=!1);var g=f?"span":"div",[[y]]=We.texts(a);h=u?null:n.createElement(g,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},n.createElement(ur,{decorations:[],isLast:!1,parent:a,text:y})),Bt.set(y,0),Mt.set(y,a)}return cr((()=>{l.current?(zt.set(d,l.current),Rt.set(a,l.current),Tt.set(l.current,a)):(zt.delete(d),Rt.delete(a))})),n.createElement(nr.Provider,{value:!!s},o({attributes:p,children:h,element:a}))}),((e,t)=>e.decorate===t.decorate&&e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&hr(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&Ye.equals(e.selection,t.selection)))),dr=e=>{var{attributes:t,children:r,element:a}=e,o=Gt().isInline(a)?"span":"div";return n.createElement(o,Object.assign({},t,{style:{position:"relative"}}),r)},hr=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(!Ye.equals(n,a))return!1}return!0},pr=e=>{for(var{decorate:t,decorations:r,node:a,renderElement:o,renderLeaf:i,selection:s}=e,l=Gt(),c=Jt.findPath(l,a),u=[],f=Re.isElement(a)&&!l.isInline(a)&&ze.hasInlines(l,a),d=0;d<a.children.length;d++){var h=c.concat(d),p=a.children[d],v=Jt.findKey(l,p),m=ze.range(l,h),g=s&&Ye.intersection(m,s),y=t([p,h]);for(var w of r){var b=Ye.intersection(w,m);b&&y.push(b)}Re.isElement(p)?u.push(n.createElement(fr,{decorate:t,decorations:y,element:p,key:v.id,renderElement:o,renderLeaf:i,selection:g})):u.push(n.createElement(ur,{decorations:y,key:v.id,isLast:f&&d===a.children.length-1,parent:a,renderLeaf:i,text:p})),Bt.set(p,d),Mt.set(p,a)}return n.createElement(n.Fragment,null,u)},vr=("undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,"undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent)),mr="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),gr="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),yr="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),wr="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),br={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},Er={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},xr={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Or=e=>{var t=br[e],r=Er[e],n=xr[e],a=t&&(0,jt.TB)(t),o=r&&(0,jt.TB)(r),i=n&&(0,jt.TB)(n);return e=>!(!a||!a(e))||(!!(vr&&o&&o(e))||!(vr||!i||!i(e)))},kr={isBold:Or("bold"),isCompose:Or("compose"),isMoveBackward:Or("moveBackward"),isMoveForward:Or("moveForward"),isDeleteBackward:Or("deleteBackward"),isDeleteForward:Or("deleteForward"),isDeleteLineBackward:Or("deleteLineBackward"),isDeleteLineForward:Or("deleteLineForward"),isDeleteWordBackward:Or("deleteWordBackward"),isDeleteWordForward:Or("deleteWordForward"),isExtendBackward:Or("extendBackward"),isExtendForward:Or("extendForward"),isExtendLineBackward:Or("extendLineBackward"),isExtendLineForward:Or("extendLineForward"),isItalic:Or("italic"),isMoveLineBackward:Or("moveLineBackward"),isMoveLineForward:Or("moveLineForward"),isMoveWordBackward:Or("moveWordBackward"),isMoveWordForward:Or("moveWordForward"),isRedo:Or("redo"),isSplitBlock:Or("splitBlock"),isTransposeCharacter:Or("transposeCharacter"),isUndo:Or("undo")};function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cr=!(mr||yr||wr),jr=e=>{var{autoFocus:t,decorate:r=Dr,onDOMBeforeInput:a,placeholder:o,readOnly:i=!1,renderElement:s,renderLeaf:l,style:c={},as:u="div"}=e,f=St(e,["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","style","as"]),d=er(),h=(0,n.useRef)(null);Wt.set(d,i);var p=(0,n.useMemo)((()=>({isComposing:!1,isUpdatingSelection:!1,latestElement:null})),[]);cr((()=>{h.current?(_t.set(d,h.current),Rt.set(d,h.current),Tt.set(h.current,d)):Rt.delete(d)})),cr((()=>{var{selection:e}=d,t=window.getSelection();if(!p.isComposing&&t&&Jt.isFocused(d)){var r="None"!==t.type;if(e||r){var n=_t.get(d),a=!1;if(n.contains(t.anchorNode)&&n.contains(t.focusNode)&&(a=!0),!(r&&a&&e&&Ye.equals(Jt.toSlateRange(d,t),e))){var o=Jt.toDOMNode(d,d);p.isUpdatingSelection=!0;var i=e&&Jt.toDOMRange(d,e);if(i){Ye.isBackward(e)?t.setBaseAndExtent(i.endContainer,i.endOffset,i.startContainer,i.startOffset):t.setBaseAndExtent(i.startContainer,i.startOffset,i.endContainer,i.endOffset);var s=i.startContainer.parentElement;kt(s,{scrollMode:"if-needed",boundary:o})}else t.removeAllRanges();setTimeout((()=>{i&&mr&&o.focus(),p.isUpdatingSelection=!1}))}}}})),(0,n.useEffect)((()=>{h.current&&t&&h.current.focus()}),[t]);var v=(0,n.useCallback)((e=>{if(!i&&Ar(d,e.target)&&!Mr(e,a)){var{selection:t}=d,{inputType:r}=e,n=e.dataTransfer||e.data||void 0;if("insertCompositionText"===r||"deleteCompositionText"===r)return;if(e.preventDefault(),!r.startsWith("delete")||r.startsWith("deleteBy")){var[o]=e.getTargetRanges();if(o){var s=Jt.toSlateRange(d,o);t&&Ye.equals(t,s)||ft.select(d,s)}}if(t&&Ye.isExpanded(t)&&r.startsWith("delete"))return void ze.deleteFragment(d);switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":ze.deleteFragment(d);break;case"deleteContent":case"deleteContentForward":ze.deleteForward(d);break;case"deleteContentBackward":ze.deleteBackward(d);break;case"deleteEntireSoftLine":ze.deleteBackward(d,{unit:"line"}),ze.deleteForward(d,{unit:"line"});break;case"deleteHardLineBackward":ze.deleteBackward(d,{unit:"block"});break;case"deleteSoftLineBackward":ze.deleteBackward(d,{unit:"line"});break;case"deleteHardLineForward":ze.deleteForward(d,{unit:"block"});break;case"deleteSoftLineForward":ze.deleteForward(d,{unit:"line"});break;case"deleteWordBackward":ze.deleteBackward(d,{unit:"word"});break;case"deleteWordForward":ze.deleteForward(d,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":ze.insertBreak(d);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":n instanceof DataTransfer?Jt.insertData(d,n):"string"==typeof n&&ze.insertText(d,n)}}}),[i,a]);cr((()=>(h.current&&Cr&&h.current.addEventListener("beforeinput",v),()=>{h.current&&Cr&&h.current.removeEventListener("beforeinput",v)})),[v]);var m=(0,n.useCallback)(gt()((()=>{if(!i&&!p.isComposing&&!p.isUpdatingSelection){var{activeElement:e}=window.document,t=Jt.toDOMNode(d,d),r=window.getSelection();if(e===t?(p.latestElement=e,It.set(d,!0)):It.delete(d),!r)return ft.deselect(d);var{anchorNode:n,focusNode:a}=r,o=Ar(d,n)||Nr(d,n),s=Ar(d,a)||Nr(d,a);if(o&&s){var l=Jt.toSlateRange(d,r);ft.select(d,l)}else ft.deselect(d)}}),100),[i]);cr((()=>(window.document.addEventListener("selectionchange",m),()=>{window.document.removeEventListener("selectionchange",m)})),[m]);var g=r([d,[]]);if(o&&1===d.children.length&&1===Array.from(We.texts(d)).length&&""===We.string(d)){var y=ze.start(d,[]);g.push({[Vt]:!0,placeholder:o,anchor:y,focus:y})}return n.createElement(rr.Provider,{value:i},n.createElement(u,Object.assign({"data-gramm":!1,role:i?void 0:"textbox"},f,{spellCheck:Cr?f.spellCheck:void 0,autoCorrect:Cr?f.autoCorrect:void 0,autoCapitalize:Cr?f.autoCapitalize:void 0,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i||void 0,suppressContentEditableWarning:!0,ref:h,style:Fr({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},c),onBeforeInput:(0,n.useCallback)((e=>{if(!Cr&&!i&&!Br(e,f.onBeforeInput)&&Ar(d,e.target)){e.preventDefault();var t=e.data;ze.insertText(d,t)}}),[i]),onBlur:(0,n.useCallback)((e=>{if(!i&&!p.isUpdatingSelection&&Ar(d,e.target)&&!Br(e,f.onBlur)&&p.latestElement!==window.document.activeElement){var{relatedTarget:t}=e;if(!(t===Jt.toDOMNode(d,d)||qt(t)&&t.hasAttribute("data-slate-spacer"))){if(null!=t&&Kt(t)&&Jt.hasDOMNode(d,t)){var r=Jt.toSlateNode(d,t);if(Re.isElement(r)&&!d.isVoid(r))return}It.delete(d)}}}),[i,f.onBlur]),onClick:(0,n.useCallback)((e=>{if(!i&&Sr(d,e.target)&&!Br(e,f.onClick)&&Kt(e.target)){var t=Jt.toSlateNode(d,e.target),r=Jt.findPath(d,t),n=ze.start(d,r),a=ze.end(d,r),o=ze.void(d,{at:n}),s=ze.void(d,{at:a});if(o&&s&&qe.equals(o[1],s[1])){var l=ze.range(d,n);ft.select(d,l)}}}),[i,f.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{Ar(d,e.target)&&!Br(e,f.onCompositionEnd)&&(p.isComposing=!1,gr||mr||!e.data||ze.insertText(d,e.data))}),[f.onCompositionEnd]),onCompositionStart:(0,n.useCallback)((e=>{Ar(d,e.target)&&!Br(e,f.onCompositionStart)&&(p.isComposing=!0)}),[f.onCompositionStart]),onCopy:(0,n.useCallback)((e=>{Ar(d,e.target)&&!Br(e,f.onCopy)&&(e.preventDefault(),Jt.setFragmentData(d,e.clipboardData))}),[f.onCopy]),onCut:(0,n.useCallback)((e=>{if(!i&&Ar(d,e.target)&&!Br(e,f.onCut)){e.preventDefault(),Jt.setFragmentData(d,e.clipboardData);var{selection:t}=d;t&&Ye.isExpanded(t)&&ze.deleteFragment(d)}}),[i,f.onCut]),onDragOver:(0,n.useCallback)((e=>{if(Sr(d,e.target)&&!Br(e,f.onDragOver)){var t=Jt.toSlateNode(d,e.target);ze.isVoid(d,t)&&e.preventDefault()}}),[f.onDragOver]),onDragStart:(0,n.useCallback)((e=>{if(Sr(d,e.target)&&!Br(e,f.onDragStart)){var t=Jt.toSlateNode(d,e.target),r=Jt.findPath(d,t);if(ze.void(d,{at:r})){var n=ze.range(d,r);ft.select(d,n)}Jt.setFragmentData(d,e.dataTransfer)}}),[f.onDragStart]),onDrop:(0,n.useCallback)((e=>{if(Sr(d,e.target)&&!i&&!Br(e,f.onDrop)&&(!Cr||!gr&&e.dataTransfer.files.length>0)){e.preventDefault();var t=Jt.findEventRange(d,e),r=e.dataTransfer;ft.select(d,t),Jt.insertData(d,r)}}),[i,f.onDrop]),onFocus:(0,n.useCallback)((e=>{if(!i&&!p.isUpdatingSelection&&Ar(d,e.target)&&!Br(e,f.onFocus)){var t=Jt.toDOMNode(d,d);if(p.latestElement=window.document.activeElement,mr&&e.target!==t)return void t.focus();It.set(d,!0)}}),[i,f.onFocus]),onKeyDown:(0,n.useCallback)((e=>{if(!i&&Ar(d,e.target)&&!Br(e,f.onKeyDown)){var{nativeEvent:t}=e,{selection:r}=d;if(kr.isRedo(t))return e.preventDefault(),void("function"==typeof d.redo&&d.redo());if(kr.isUndo(t))return e.preventDefault(),void("function"==typeof d.undo&&d.undo());if(kr.isMoveLineBackward(t))return e.preventDefault(),void ft.move(d,{unit:"line",reverse:!0});if(kr.isMoveLineForward(t))return e.preventDefault(),void ft.move(d,{unit:"line"});if(kr.isExtendLineBackward(t))return e.preventDefault(),void ft.move(d,{unit:"line",edge:"focus",reverse:!0});if(kr.isExtendLineForward(t))return e.preventDefault(),void ft.move(d,{unit:"line",edge:"focus"});if(kr.isMoveBackward(t))return e.preventDefault(),void(r&&Ye.isCollapsed(r)?ft.move(d,{reverse:!0}):ft.collapse(d,{edge:"start"}));if(kr.isMoveForward(t))return e.preventDefault(),void(r&&Ye.isCollapsed(r)?ft.move(d):ft.collapse(d,{edge:"end"}));if(kr.isMoveWordBackward(t))return e.preventDefault(),void ft.move(d,{unit:"word",reverse:!0});if(kr.isMoveWordForward(t))return e.preventDefault(),void ft.move(d,{unit:"word"});if(!Cr){if(kr.isBold(t)||kr.isItalic(t)||kr.isTransposeCharacter(t))return void e.preventDefault();if(kr.isSplitBlock(t))return e.preventDefault(),void ze.insertBreak(d);if(kr.isDeleteBackward(t))return e.preventDefault(),void(r&&Ye.isExpanded(r)?ze.deleteFragment(d):ze.deleteBackward(d));if(kr.isDeleteForward(t))return e.preventDefault(),void(r&&Ye.isExpanded(r)?ze.deleteFragment(d):ze.deleteForward(d));if(kr.isDeleteLineBackward(t))return e.preventDefault(),void(r&&Ye.isExpanded(r)?ze.deleteFragment(d):ze.deleteBackward(d,{unit:"line"}));if(kr.isDeleteLineForward(t))return e.preventDefault(),void(r&&Ye.isExpanded(r)?ze.deleteFragment(d):ze.deleteForward(d,{unit:"line"}));if(kr.isDeleteWordBackward(t))return e.preventDefault(),void(r&&Ye.isExpanded(r)?ze.deleteFragment(d):ze.deleteBackward(d,{unit:"word"}));if(kr.isDeleteWordForward(t))return e.preventDefault(),void(r&&Ye.isExpanded(r)?ze.deleteFragment(d):ze.deleteForward(d,{unit:"word"}))}}}),[i,f.onKeyDown]),onPaste:(0,n.useCallback)((e=>{!Ar(d,e.target)||Br(e,f.onPaste)||Cr&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||i||(e.preventDefault(),Jt.insertData(d,e.clipboardData))}),[i,f.onPaste])}),n.createElement(pr,{decorate:r,decorations:g,node:d,renderElement:s,renderLeaf:l,selection:d.selection})))},Dr=()=>[],Sr=(e,t)=>Kt(t)&&Jt.hasDOMNode(e,t),Ar=(e,t)=>Kt(t)&&Jt.hasDOMNode(e,t,{editable:!0}),Nr=(e,t)=>{var r=Sr(e,t)&&Jt.toSlateNode(e,t);return ze.isVoid(e,r)},Br=(e,t)=>!!t&&(t(e),e.isDefaultPrevented()||e.isPropagationStopped()),Mr=(e,t)=>!!t&&(t(e),e.defaultPrevented),_r={isHistory:e=>i(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||Ve.isOperationList(e.redos[0]))&&(0===e.undos.length||Ve.isOperationList(e.undos[0]))},Tr=(new WeakMap,new WeakMap),zr=new WeakMap,Rr={isHistoryEditor:e=>ze.isEditor(e)&&_r.isHistory(e.history),isMerging:e=>zr.get(e),isSaving:e=>Tr.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=Rr.isMerging(e);zr.set(e,!1),t(),zr.set(e,r)},withoutSaving(e,t){var r=Rr.isSaving(e);Tr.set(e,!1),t(),Tr.set(e,r)}},Lr=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!qe.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!qe.equals(e.path,t.path))),Wr=(e,t)=>"set_selection"!==e.type||null!=e.newProperties,Ir=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),Hr=e=>"set_selection"!==e.type,Vr=r(5193),qr=r(2524),Kr=r(546),Ur=r(953),Zr=r(666);const $r=(e,t)=>{const r=ze.marks(e);return!!r&&!0===r[t]},Jr=(e,t)=>{$r(e,t)?ze.removeMark(e,t):ze.addMark(e,t,!0)};r(3318);const Yr="rich-text__button",Xr=({format:e,children:t})=>{const r=er();return n.createElement("button",{type:"button",className:[Yr,$r(r,e)&&`${Yr}__button--active`].filter(Boolean).join(" "),onMouseDown:t=>{t.preventDefault(),Jr(r,e)}},t)},Gr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic bold-icon"},n.createElement("path",{className:"fill",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),Qr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic inline-code-icon"},n.createElement("path",{className:"fill",d:"M7.375 16.781l1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 000 1.562l5 4zm9.25-9.562l-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 000-1.562l-5-4zM14.976 3.216l-4 18-1.953-.434 4-18z"})),en=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic italic-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"})),tn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic strikethrough-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})),rn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic underline-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})),nn={bold:{Button:()=>n.createElement(Xr,{format:"bold"},n.createElement(Gr,null)),Leaf:({attributes:e,children:t})=>n.createElement("strong",{...e},t)},code:{Button:()=>n.createElement(Xr,{format:"code"},n.createElement(Qr,null)),Leaf:({attributes:e,children:t})=>n.createElement("code",{...e},t)},italic:{Button:()=>n.createElement(Xr,{format:"italic"},n.createElement(en,null)),Leaf:({attributes:e,children:t})=>n.createElement("em",{...e},t)},strikethrough:{Button:()=>n.createElement(Xr,{format:"strikethrough"},n.createElement(tn,null)),Leaf:({attributes:e,children:t})=>n.createElement("del",{...e},t)},underline:{Button:()=>n.createElement(Xr,{format:"underline"},n.createElement(rn,null)),Leaf:({attributes:e,children:t})=>n.createElement("u",{...e},t)}},an=(e,t)=>{const[r]=ze.nodes(e,{match:e=>e.type===t});return!!r},on=["ol","ul"],sn=(e,t)=>{const r=an(e,t),n=on.includes(t);let a=t;if(r?a="p":n&&(a="li"),e.blurSelection&&ft.select(e,e.blurSelection),ft.unwrapNodes(e,{match:e=>on.includes(e.type),split:!0}),ft.setNodes(e,{type:a}),!r&&n){const r={type:t,children:[]};ft.wrapNodes(e,r)}Jt.focus(e)},ln="rich-text__button",cn=({format:e,children:t,onClick:r,className:a})=>{const o=er(),i=(0,n.useCallback)((t=>{t.preventDefault(),sn(o,e)}),[o,e]);return n.createElement("button",{type:"button",className:[ln,a,an(o,e)&&`${ln}__button--active`].filter(Boolean).join(" "),onClick:r||i},t)},un=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h1-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z"})),fn={Button:()=>n.createElement(cn,{format:"h1"},n.createElement(un,null)),Element:({attributes:e,children:t})=>n.createElement("h1",{...e},t)},dn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h2-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8a2 2 0 01-2 2h-2v2h4v2H9v-4a2 2 0 012-2h2V9H9V7h4a2 2 0 012 2v2z"})),hn={Button:()=>n.createElement(cn,{format:"h2"},n.createElement(dn,null)),Element:({attributes:e,children:t})=>n.createElement("h2",{...e},t)},pn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h3-icon"},n.createElement("path",{fill:"none",d:"M.01 0h24v24h-24z"}),n.createElement("path",{className:"fill",d:"M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15a2 2 0 01-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4a2 2 0 012 2v1.5z"})),vn={Button:()=>n.createElement(cn,{format:"h3"},n.createElement(pn,null)),Element:({attributes:e,children:t})=>n.createElement("h3",{...e},t)},mn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h4-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"})),gn={Button:()=>n.createElement(cn,{format:"h4"},n.createElement(mn,null)),Element:({attributes:e,children:t})=>n.createElement("h4",{...e},t)},yn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h5-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2H9v-2h4v-2H9V7h6v2z"})),wn={Button:()=>n.createElement(cn,{format:"h5"},n.createElement(yn,null)),Element:({attributes:e,children:t})=>n.createElement("h5",{...e},t)},bn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h6-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V9a2 2 0 012-2h4v2z"})),En={Button:()=>n.createElement(cn,{format:"h6"},n.createElement(bn,null)),Element:({attributes:e,children:t})=>n.createElement("h6",{...e},t)};var xn=r(727);const On=(e,t,r)=>{(e=>{const[t]=ze.nodes(e,{match:e=>"link"===e.type});return!!t})(e)&&(e=>{ft.unwrapNodes(e,{match:e=>"link"===e.type})})(e);const{selection:n}=e,a=n&&Ye.isCollapsed(n),o={type:"link",url:t,newTab:r,children:a?[{text:t}]:[]};a?ft.insertNodes(e,o):(ft.wrapNodes(e,o,{split:!0}),ft.collapse(e,{edge:"end"}))},kn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic link"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"})),Pn=({children:e})=>Ct.createPortal(e,document.getElementById("portal"));var Fn=r(5050),Cn=r(4346),jn=r(6128);r(3404);const Dn="rich-text-link",Sn={Button:()=>{const e=er();return n.createElement(cn,{format:"link",onClick:()=>On(e)},n.createElement(kn,null))},Element:({attributes:e,children:t,element:r})=>{const a=er(),o=(0,n.useRef)(null),{height:i,width:s}=(0,xn.useWindowInfo)(),[l,c]=(0,n.useState)(0),[u,f]=(0,n.useState)(0),[d,h]=(0,n.useState)(!1),[p,v]=(0,n.useState)(0),[m,g]=(0,n.useState)(0),[y,w]=(0,n.useState)(r.url),[b,E]=(0,n.useState)(Boolean(r.newTab)),x=(0,n.useCallback)((()=>{if(null==o?void 0:o.current){const e=o.current.getBoundingClientRect(),t=(e=>{let t=e,r=0;if(t.offsetParent)do{r+=t.offsetTop,t=t.offsetParent}while(t);return r<0?0:r})(o.current);f(t),c(e.left),v(e.width),g(e.height)}}),[]);return(0,n.useEffect)((()=>{x()}),[t,x,i,s]),(0,n.useEffect)((()=>{const e=Jt.findPath(a,r);ft.setNodes(a,{url:y,newTab:b},{at:e})}),[y,b,a,r]),n.createElement("span",{className:Dn,...e},n.createElement("span",{ref:o},n.createElement(Pn,null,n.createElement("div",{className:"rich-text-link__popup-wrap",style:{width:p,height:m,top:u,left:l}},n.createElement(Fn.Z,{initActive:void 0===y,buttonType:"custom",button:n.createElement("span",{className:"rich-text-link__button"}),size:"small",color:"dark",horizontalAlign:"center",onToggleOpen:x,render:({close:e})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"rich-text-link__url-wrap"},n.createElement("input",{value:y||"",className:"rich-text-link__url",placeholder:"Enter a URL",onChange:e=>{const{value:t}=e.target;t&&d&&h(!1),w(t)},onKeyDown:t=>{"Enter"===t.key&&e()}}),n.createElement(Cn.Z,{className:"rich-text-link__confirm",buttonStyle:"none",icon:"chevron",onClick:t=>{t.preventDefault(),y?e():h(!0)}}),d&&n.createElement(Zr.Z,{showError:d,message:"Please enter a valid URL."})),n.createElement(Cn.Z,{className:["rich-text-link__new-tab",b&&"rich-text-link__new-tab--checked"].filter(Boolean).join(" "),buttonStyle:"none",onClick:()=>E(!b)},n.createElement(jn.Z,null),"Open link in new tab"))}))),t))},plugins:[e=>{const t=e,{isInline:r}=t;return t.isInline=e=>"link"===e.type||r(e),t}]},An=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic ordered-list-icon"},n.createElement("path",{className:"fill",d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),Nn={Button:()=>n.createElement(cn,{format:"ol"},n.createElement(An,null)),Element:({attributes:e,children:t})=>n.createElement("ol",{...e},t)},Bn=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic unordered-list-icon"},n.createElement("path",{className:"fill",d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})),Mn={Button:()=>n.createElement(cn,{format:"ul"},n.createElement(Bn,null)),Element:({attributes:e,children:t})=>n.createElement("ul",{...e},t)},_n={Element:({attributes:e,children:t})=>n.createElement("li",{...e},t)},Tn=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"relationship"===e.type||r(e),t};var zn=r(9243);r(3981);const Rn=()=>n.createElement("svg",{className:"icon icon--relationship",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M19.0597 14.9691L19.0597 19.0946L6.01681 19.0946L6.01681 6.03028L10.0948 6.03028",className:"stroke",strokeWidth:"2"}),n.createElement("path",{d:"M19.0597 11.0039L19.0597 6.00387L14.0597 6.00387",className:"stroke",strokeWidth:"2"}),n.createElement("line",{x1:"18.7061",y1:"6.40767",x2:"13.0493",y2:"12.0645",className:"stroke",strokeWidth:"2"}));var Ln=r(7489);r(6654);const Wn="rich-text-relationship",In={depth:0},Hn=({attributes:e,children:t,element:r})=>{var a;const{relationTo:o,value:i}=r,{collections:s,serverURL:l,routes:{api:c}}=(0,zn.useConfig)(),[u]=(0,n.useState)((()=>s.find((e=>e.slug===o)))),[{data:f}]=(0,Ln.Z)(`${l}${c}/${u.slug}/${null==i?void 0:i.id}`,{initialParams:In});return n.createElement("div",{className:Wn,contentEditable:!1,...e},n.createElement(Rn,null),n.createElement("div",{className:`${Wn}__wrap`},n.createElement("div",{className:`${Wn}__label`},u.labels.singular," ","Relationship"),n.createElement("h5",null,f[(null===(a=null==u?void 0:u.admin)||void 0===a?void 0:a.useAsTitle)||"id"])),t)};var Vn=r(1851),qn=r(8572),Kn=r(9599),Un=r(6268),Zn=r(3636),$n=r(4012),Jn=r(1757),Yn=r(6951);const Xn=(e,t)=>e.reduce(((e,r)=>{var n,a,o,i;return(null===(o=null===(a=null===(n=null==t?void 0:t.collections)||void 0===n?void 0:n[r.slug])||void 0===a?void 0:a.read)||void 0===o?void 0:o.permission)&&(null===(i=null==r?void 0:r.admin)||void 0===i?void 0:i.enableRichTextRelationship)?[...e,{label:r.labels.plural,value:r.slug}]:e}),[]),Gn=()=>{const{collections:e}=(0,zn.useConfig)(),{permissions:t}=(0,zn.useAuth)(),[r,a]=(0,n.useState)((()=>Xn(e,t))),{getData:o}=(0,$n.ey)(),{relationTo:i}=o();return(0,n.useEffect)((()=>{a(Xn(e,t))}),[e,t]),n.createElement(n.Fragment,null,n.createElement(Yn.Z,{required:!0,label:"Relation To",name:"relationTo",options:r}),i&&n.createElement(Jn.Z,{label:"Related Document",name:"value",relationTo:i,required:!0}))};var Qn=r(3780);r(8723);const ea={},ta="relationship-rich-text-button",ra={h1:fn,h2:hn,h3:vn,h4:gn,h5:wn,h6:En,link:Sn,ol:Nn,ul:Mn,li:_n,relationship:{Button:({path:e})=>{const{open:t,closeAll:r}=(0,Vn.useModal)(),a=er(),{serverURL:o,routes:{api:i},collections:s}=(0,zn.useConfig)(),[l,c]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!1),[d]=(0,n.useState)((()=>s.find((({admin:{enableRichTextRelationship:e}})=>e)))),h=`${e}-add-relationship`,p=(0,n.useCallback)((async(e,{relationTo:t,value:n})=>{f(!0);const s=await Qn.E.get(`${o}${i}/${t}/${n}?depth=0`),l=await s.json();((e,{value:t,relationTo:r})=>{const n=[{type:"relationship",value:t,relationTo:r,children:[{text:" "}]},{children:[{text:""}]}];e.blurSelection&&ft.select(e,e.blurSelection),ft.insertNodes(e,n);const a=e.selection.anchor.path[0],o={anchor:{path:[a+1,0],offset:0},focus:{path:[a+1,0],offset:0}};ft.select(e,o),Jt.focus(e)})(a,{value:{id:l.id},relationTo:t}),r(),c(!1),f(!1)}),[a,r,i,o]);return(0,n.useEffect)((()=>{l&&t(h)}),[l,t,h]),d?n.createElement(n.Fragment,null,n.createElement(cn,{className:ta,format:"relationship",onClick:()=>c(!0)},n.createElement(Rn,null)),l&&n.createElement(Vn.Modal,{slug:h,className:"relationship-rich-text-button__modal"},n.createElement(Kn.Z,null,n.createElement("header",{className:"relationship-rich-text-button__header"},n.createElement("h3",null,"Add Relationship"),n.createElement(Cn.Z,{buttonStyle:"none",onClick:()=>{r(),c(!1)}},n.createElement(Zn.Z,null))),n.createElement(qn.Z,{onSubmit:p,initialData:ea,disabled:u},n.createElement(Gn,null),n.createElement(Un.Z,null,"Add relationship"))))):null},Element:Hn,plugins:[Tn]}},na={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code"},aa=(e,t)=>"function"==typeof t?t(e):e,oa=(e,t)=>t.reduce(((e,t)=>{if("object"==typeof t&&Array.isArray(t.plugins))return t.plugins.reduce(aa,e);if("string"==typeof t){if(ra[t]&&ra[t].plugins)return ra[t].plugins.reduce(aa,e);if(nn[t]&&nn[t].plugins)return nn[t].plugins.reduce(aa,e)}return e}),e);var ia=r(2077),sa=r(1417),la=r(8728);function ca(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ua=new WeakMap,fa=new WeakMap;class da{}class ha extends da{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}class pa extends da{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}var va=e=>fa.get(e);function ma(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(r),!0).forEach((function(t){ca(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ma(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ya=new WeakSet,wa=e=>{var t=[],r=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var a={text:e};ya.add(a),e=a}if(et.isText(e)){var o=e;et.isText(n)&&ya.has(n)&&ya.has(o)&&et.equals(n,o,{loose:!0})?n.text+=o.text:t.push(o)}else if(Re.isElement(e))t.push(e);else{if(!(e instanceof da))throw new Error("Unexpected hyperscript child object: ".concat(e));var i=t[t.length-1];et.isText(i)||(r(""),i=t[t.length-1]),e instanceof ha?((e,t)=>{var r=e.text.length;ua.set(e,[r,t])})(i,e):e instanceof pa&&((e,t)=>{var r=e.text.length;fa.set(e,[r,t])})(i,e)}}};for(var n of e.flat(1/0))r(n);return t};function ba(e,t,r){return ga({},t,{children:wa(r)})}function Ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(r),!0).forEach((function(t){ca(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oa={anchor:function(e,t,r){return new ha(t)},cursor:function(e,t,r){return[new ha(t),new pa(t)]},editor:function(e,t,r){var n,a=[];for(var o of r)Ye.isRange(o)?n=o:a.push(o);var i,s=wa(a),l={},c=pt();for(var[u,f]of(Object.assign(c,t),c.children=s,We.texts(c))){var d=(i=u,ua.get(i)),h=va(u);if(null!=d){var[p]=d;l.anchor={path:f,offset:p}}if(null!=h){var[v]=h;l.focus={path:f,offset:v}}}if(l.anchor&&!l.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!l.anchor&&l.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=n?c.selection=n:Ye.isRange(l)&&(c.selection=l),c},element:ba,focus:function(e,t,r){return new pa(t)},fragment:function(e,t,r){return wa(r)},selection:function(e,t,r){var n=r.find((e=>e instanceof ha)),a=r.find((e=>e instanceof pa));if(!n||null==n.offset||null==n.path)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!a||null==a.offset||null==a.path)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return ga({anchor:{offset:n.offset,path:n.path},focus:{offset:a.offset,path:a.path}},t)},text:function(e,t,r){var n=wa(r);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[a]=n;if(null==a&&(a={text:""}),!et.isText(a))throw new Error("\n    The <text> hyperscript tag can only contain text content as children.");return ya.delete(a),Object.assign(a,t),a}},ka=e=>function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var s=e[t];if(!s)throw new Error("No hyperscript creator found for tag: <".concat(t,">"));null==r&&(r={}),i(r)||(a=[r].concat(a),r={});var l=s(t,r,a=a.filter((e=>Boolean(e))).flat());return l},Pa=e=>{var t={},r=function(r){var n=e[r];if("object"!=typeof n)throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(r,">  tag you passed: ").concat(n));t[r]=(e,t,r)=>ba(0,xa({},n,{},t),r)};for(var n in e)r(n);return t},Fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,r=Pa(t),n=xa({},Oa,{},r,{},e.creators),a=ka(n);return a}();const Ca={A:e=>({type:"link",newTab:"_blank"===e.getAttribute("target"),url:e.getAttribute("href")}),BLOCKQUOTE:()=>({type:"blockquote"}),H1:()=>({type:"h1"}),H2:()=>({type:"h2"}),H3:()=>({type:"h3"}),H4:()=>({type:"h4"}),H5:()=>({type:"h5"}),H6:()=>({type:"h6"}),IMG:e=>({type:"image",url:e.getAttribute("src")}),LI:()=>({type:"li"}),OL:()=>({type:"ol"}),P:()=>({type:"paragraph"}),PRE:()=>({type:"code"}),UL:()=>({type:"ul"})},ja={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underline:!0})},Da=e=>{if(3===e.nodeType)return e.textContent;if(1!==e.nodeType)return null;if("BR"===e.nodeName)return"\n";const{nodeName:t}=e;let r=e;"PRE"===t&&e.childNodes[0]&&"CODE"===e.childNodes[0].nodeName&&([r]=e.childNodes);const n=Array.from(r.childNodes).map(Da).flat();if("BODY"===e.nodeName)return Fa("fragment",{},n);if(Ca[t]){const r=Ca[t](e);return Fa("element",r,n)}if(ja[t]){const r=ja[t](e);return n.map((e=>Fa("text",r,e)))}return n},Sa=e=>{const{insertData:t,isInline:r,isVoid:n}=e,a=e;return a.isInline=e=>"link"===e.type||r(e),a.isVoid=e=>"image"===e.type||n(e),a.insertData=e=>{const r=e.getData("text/html");if(r){const e=(new DOMParser).parseFromString(r,"text/html"),t=Da(e.body);ft.insertFragment(a,t)}else t(e)},a},Aa=(e,t)=>{const r=[...e];return(e.indexOf("ul")>-1||e.indexOf("ol")>-1)&&r.push("li"),r.reduce(((e,r)=>"object"==typeof r&&r.name?{...e,[r.name]:r}:"string"==typeof r&&t[r]?{...e,[r]:t[r]}:e),{})};r(3329);const Na=["h1","h2","h3","h4","h5","h6","ul","ol","link","relationship"],Ba=["bold","italic","underline","strikethrough","code"],Ma=["h1","h2","h3","h4","h5","h6"],_a="rich-text",Ta=(0,Kr.Z)((e=>{const{path:t,name:r,required:o,validate:i=Vr.richText,label:s,admin:l,admin:{readOnly:c,style:u,width:f,placeholder:d,description:h,hideGutter:p,condition:v}={}}=e,m=(null==l?void 0:l.elements)||Na,g=(null==l?void 0:l.leaves)||Ba,y=t||r,[w,b]=(0,n.useState)(!1),[E,x]=(0,n.useState)({}),[O,k]=(0,n.useState)({}),P=(0,n.useCallback)((({attributes:e,children:t,element:r})=>{const a=E[null==r?void 0:r.type],o=null==a?void 0:a.Element;return o?n.createElement(o,{attributes:e,element:r},t):n.createElement("div",{...e},t)}),[E]),F=(0,n.useCallback)((({attributes:e,children:t,leaf:r})=>{var a;const o=Object.keys(O).find((e=>r[e]));if(null===(a=O[o])||void 0===a?void 0:a.Leaf){const{Leaf:a}=O[o];return n.createElement(a,{attributes:e,leaf:r},t)}return n.createElement("span",{...e},t)}),[O]),C=(0,n.useCallback)((e=>i(e,{required:o})),[i,o]),j=(0,qr.Z)({path:y,validate:C,stringify:!0,condition:v}),{value:D,showError:S,setValue:A,errorMessage:N}=j,B=[_a,"field-type",S&&"error",c&&`${_a}--read-only`].filter(Boolean).join(" "),M=(0,n.useMemo)((()=>{let e=Sa((e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];Rr.withoutSaving(t,(()=>{ze.withoutNormalizing(t,(()=>{for(var e of n)t.apply(e)}))})),e.redos.pop(),e.undos.push(n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];Rr.withoutSaving(t,(()=>{ze.withoutNormalizing(t,(()=>{var e=n.map(Ve.inverse).reverse();for(var r of e)r===e[e.length-1]&&"set_selection"===r.type&&null==r.newProperties||t.apply(r)}))})),e.redos.push(n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:a}=t,{undos:o}=a,i=o[o.length-1],s=i&&i[i.length-1],l=Ir(e,s),c=Rr.isSaving(t),u=Rr.isMerging(t);if(null==c&&(c=Wr(e)),c){if(null==u&&(u=null!=i&&(0!==n.length||Lr(e,s)||l)),i&&u)l&&i.pop(),i.push(e);else{var f=[e];o.push(f)}for(;o.length>100;)o.shift();Hr(e)&&(a.redos=[])}r(e)},t})((e=>{var t=e,{apply:r,onChange:n}=t;return t.apply=e=>{var n=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[a,o]of ze.levels(t,{at:e.path})){var i=Jt.findKey(t,a);n.push([o,i])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[s,l]of ze.levels(t,{at:qe.parent(e.path)})){var c=Jt.findKey(t,s);n.push([l,c])}}for(var[u,f]of(r(e),n)){var[d]=ze.node(t,u);Lt.set(d,f)}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,a]=Ye.edges(r),o=ze.void(t,{at:n.path}),i=ze.void(t,{at:a.path});if(!Ye.isCollapsed(r)||o){var s=Jt.toDOMRange(t,r),l=s.cloneContents(),c=l.childNodes[0];if(l.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),i){var[u]=i,f=s.cloneRange(),d=Jt.toDOMNode(t,u);f.setEndAfter(d),l=f.cloneContents()}if(o&&(c=l.querySelector("[data-slate-spacer]")),Array.from(l.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),Ut(c)){var h=document.createElement("span");h.style.whiteSpace="pre",h.appendChild(c),l.appendChild(h),c=h}var p=t.getFragment(),v=JSON.stringify(p),m=window.btoa(encodeURIComponent(v));c.setAttribute("data-slate-fragment",m),e.setData("application/x-slate-fragment",m);var g=document.createElement("div");g.appendChild(l),g.setAttribute("hidden","true"),document.body.appendChild(g),e.setData("text/html",g.innerHTML),e.setData("text/plain",$t(g)),document.body.removeChild(g)}}},t.insertData=e=>{var r=e.getData("application/x-slate-fragment");if(r){var n=decodeURIComponent(window.atob(r)),a=JSON.parse(n);t.insertFragment(a)}else{var o=e.getData("text/plain");if(o){var i=o.split(/\r\n|\r|\n/),s=!1;for(var l of i)s&&ft.splitNodes(t,{always:!0}),t.insertText(l),s=!0}}},t.onChange=()=>{Ct.unstable_batchedUpdates((()=>{var e=Ht.get(t);e&&e(),n()}))},t})(pt())));return e=oa(e,m),e=oa(e,g),e}),[m,g]),_=(0,n.useCallback)((()=>{M.blurSelection=M.selection}),[M]);if((0,n.useEffect)((()=>{if(!w){const e=Aa(m,ra),t=Aa(g,nn);x(e),k(t),b(!0)}}),[w,m,g]),!w)return null;let T=D;if("string"==typeof T)try{T=JSON.parse(T)}catch(e){}return T||(T=ia.default),n.createElement("div",{className:B,style:{...u,width:f}},n.createElement("div",{className:`${_a}__wrap`},!p&&n.createElement(sa.Z,null),n.createElement(Zr.Z,{showError:S,message:N}),n.createElement(Ur.Z,{htmlFor:y,label:s,required:o}),n.createElement(tr,{editor:M,value:T,onChange:e=>{e!==ia.default&&e!==D&&A(e)}},n.createElement("div",{className:`${_a}__wrapper`},n.createElement("div",{className:`${_a}__toolbar`},m.map(((e,t)=>{let r;"object"==typeof e&&(null==e?void 0:e.name)&&(r=e.name),"string"==typeof e&&(r=e);const a=E[r],o=null==a?void 0:a.Button;return o?n.createElement(o,{key:t,path:y}):null})),g.map(((e,t)=>{let r;"object"==typeof e&&(null==e?void 0:e.name)&&(r=e.name),"string"==typeof e&&(r=e);const a=O[r],o=null==a?void 0:a.Button;return o?n.createElement(o,{key:t,path:y}):null}))),n.createElement(jr,{className:`${_a}__editor`,renderElement:P,renderLeaf:F,placeholder:d,spellCheck:!0,readOnly:c,onBlur:_,onKeyDown:e=>{if("Enter"===e.key)if(e.shiftKey)e.preventDefault(),M.insertText("\n");else{const t=We.descendant(M,M.selection.anchor.path.slice(0,-1));if(Ma.includes(String(t.type))){e.preventDefault();const t=We.descendant(M,M.selection.anchor.path);String(t.text).length===M.selection.anchor.offset?ft.insertNodes(M,{type:"p",children:[{text:"",marks:[]}]}):(ft.splitNodes(M),ft.setNodes(M,{type:"p"}))}}if("Backspace"===e.key){if("li"===We.descendant(M,M.selection.anchor.path.slice(0,-1)).type){const e=We.descendant(M,M.selection.anchor.path);1===String(e.text).length&&(ft.unwrapNodes(M,{match:e=>on.includes(e.type),split:!0}),ft.setNodes(M,{type:"p"}))}}Object.keys(na).forEach((t=>{if((0,a.ZP)(t,e)){e.preventDefault();Jr(M,na[t])}}))}}))),n.createElement(la.Z,{value:D,description:h})))}))},1061:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)o["f"+i]=111+i;function s(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return l(e,t)})),a=function(e){return n.some((function(t){return c(t,e)}))};return null==r?a:a(r)}function l(e,t){var r=t&&t.byKey,i={},s=(e=e.replace("++","+add")).split("+"),l=s.length;for(var c in n)i[n[c]]=!1;var d=!0,h=!1,p=void 0;try{for(var v,m=s[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var g=v.value,y=g.endsWith("?")&&g.length>1;y&&(g=g.slice(0,-1));var w=f(g),b=n[w];if(g.length>1&&!b&&!a[g]&&!o[w])throw new TypeError('Unknown modifier: "'+g+'"');1!==l&&b||(r?i.key=w:i.which=u(g)),b&&(i[b]=!y||null)}}catch(e){h=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(h)throw p}}return i}function c(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function u(e){return e=f(e),o[e]||e.toUpperCase().charCodeAt(0)}function f(e){return e=e.toLowerCase(),e=a[e]||e}t.ZP=s}}]);