"use strict";(self.webpackChunkpayload_blog_typescript=self.webpackChunkpayload_blog_typescript||[]).push([[860],{3860:(e,l,t)=>{t.r(l),t.d(l,{default:()=>p});var o=t(7294),a=t(9243),s=t(5091),n=t(2143),i=t(5977),c=t(8584),r=t(4346);t(6456);const d="card",u=e=>{const{title:l,actions:t,onClick:a}=e,s=[d,a&&`${d}--has-onclick`].filter(Boolean).join(" ");return o.createElement("div",{className:s},o.createElement("h5",null,l),t&&o.createElement("div",{className:`${d}__actions`},t),a&&o.createElement(r.Z,{className:`${d}__click`,buttonStyle:"none",onClick:a}))};t(5634);const m="dashboard",v=e=>{const{collections:l,globals:t,permissions:s}=e,{push:n}=(0,i.k6)(),{routes:{admin:d}}=(0,a.useConfig)();return o.createElement("div",{className:m},o.createElement(c.Z,null),o.createElement("div",{className:"dashboard__wrap"},o.createElement("h3",{className:"dashboard__label"},"Collections"),o.createElement("ul",{className:"dashboard__card-list"},l.map((e=>{var l,t,a;const i=null===(a=null===(t=null===(l=null==s?void 0:s.collections)||void 0===l?void 0:l[e.slug])||void 0===t?void 0:t.create)||void 0===a?void 0:a.permission;return o.createElement("li",{key:e.slug},o.createElement(u,{title:e.labels.plural,onClick:()=>n({pathname:`${d}/collections/${e.slug}`}),actions:i?o.createElement(r.Z,{el:"link",to:`${d}/collections/${e.slug}/create`,icon:"plus",round:!0,buttonStyle:"icon-label",iconStyle:"with-border"}):void 0}))}))),t.length>0&&o.createElement(o.Fragment,null,o.createElement("h3",{className:"dashboard__label"},"Globals"),o.createElement("ul",{className:"dashboard__card-list"},t.map((e=>o.createElement("li",{key:e.slug},o.createElement(u,{title:e.label,onClick:()=>n({pathname:`${d}/globals/${e.slug}`})}))))))))},p=()=>{const{permissions:e}=(0,a.useAuth)(),{setStepNav:l}=(0,s.FP)(),[t,i]=(0,o.useState)([]),{collections:c,globals:r,admin:{components:{views:{Dashboard:d}={Dashboard:void 0}}={}}={}}=(0,a.useConfig)();return(0,o.useEffect)((()=>{i(r.filter((l=>{var t,o,a;return null===(a=null===(o=null===(t=null==e?void 0:e.globals)||void 0===t?void 0:t[l.slug])||void 0===o?void 0:o.read)||void 0===a?void 0:a.permission})))}),[e,r]),(0,o.useEffect)((()=>{l([])}),[l]),o.createElement(n.Z,{DefaultComponent:v,CustomComponent:d,componentProps:{globals:t,collections:c.filter((l=>{var t,o,a;return null===(a=null===(o=null===(t=null==e?void 0:e.collections)||void 0===t?void 0:t[l.slug])||void 0===o?void 0:o.read)||void 0===a?void 0:a.permission})),permissions:e}})}}}]);